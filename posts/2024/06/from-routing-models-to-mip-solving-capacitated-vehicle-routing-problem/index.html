<!DOCTYPE html>
<html lang="en">
  <head><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <link rel="icon" href="/img/favicon.ico">
    

    <meta property="og:url" content="https://seehiong.github.io/posts/2024/06/from-routing-models-to-mip-solving-capacitated-vehicle-routing-problem/">
  <meta property="og:site_name" content="See Hiong&#39;s Blog">
  <meta property="og:title" content="From Routing Models to MIP: Solving Capacitated Vehicle Routing Problem">
  <meta property="og:description" content="In this post, we delve into solving the Capacitated Vehicle Routing Problem (CVRP) by transitioning from traditional routing models to the advanced Mixed Integer Programming (MIP) approach. We’ll start with the basics of creating a routing model using Google OR-Tools and then explore how to formulate and solve the CVRP using MIP for more optimized solutions. Whether you’re new to vehicle routing or looking to enhance your optimization techniques, this comprehensive guide provides the insights and code examples you need.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-01T20:00:00+08:00">
    <meta property="article:modified_time" content="2024-06-01T20:00:00+08:00">
    <meta property="article:tag" content="Routing Model">
    <meta property="article:tag" content="MIP">
    <meta property="article:tag" content="Micronaut">
    <meta property="article:tag" content="VRP">
    <meta property="article:tag" content="CVRP">
    <meta property="article:tag" content="Backend">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="From Routing Models to MIP: Solving Capacitated Vehicle Routing Problem">
  <meta name="twitter:description" content="In this post, we delve into solving the Capacitated Vehicle Routing Problem (CVRP) by transitioning from traditional routing models to the advanced Mixed Integer Programming (MIP) approach. We’ll start with the basics of creating a routing model using Google OR-Tools and then explore how to formulate and solve the CVRP using MIP for more optimized solutions. Whether you’re new to vehicle routing or looking to enhance your optimization techniques, this comprehensive guide provides the insights and code examples you need.">

  <meta itemprop="name" content="From Routing Models to MIP: Solving Capacitated Vehicle Routing Problem">
  <meta itemprop="description" content="In this post, we delve into solving the Capacitated Vehicle Routing Problem (CVRP) by transitioning from traditional routing models to the advanced Mixed Integer Programming (MIP) approach. We’ll start with the basics of creating a routing model using Google OR-Tools and then explore how to formulate and solve the CVRP using MIP for more optimized solutions. Whether you’re new to vehicle routing or looking to enhance your optimization techniques, this comprehensive guide provides the insights and code examples you need.">
  <meta itemprop="datePublished" content="2024-06-01T20:00:00+08:00">
  <meta itemprop="dateModified" content="2024-06-01T20:00:00+08:00">
  <meta itemprop="wordCount" content="2671">
  <meta itemprop="keywords" content="Routing Model,MIP,Micronaut,VRP,CVRP,Backend,Java"><title>From Routing Models to MIP: Solving Capacitated Vehicle Routing Problem | See Hiong&#39;s Blog</title>

    <link rel="canonical" href="https://seehiong.github.io/posts/2024/06/from-routing-models-to-mip-solving-capacitated-vehicle-routing-problem/">

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
    
    <link rel="stylesheet" href="/css/variables.css">
    
    <link rel="stylesheet" href="/css/base.css">
    
    <link rel="stylesheet" href="/css/layout.css">
    
    <link rel="stylesheet" href="/css/header.css">
    
    <link rel="stylesheet" href="/css/header.css">
    
    <link rel="stylesheet" href="/css/cards.css">
    
    <link rel="stylesheet" href="/css/content_elements.css">
    
    <link rel="stylesheet" href="/css/codeblocks.css">
    
    <link rel="stylesheet" href="/css/page_specific.css">
    
    <link rel="stylesheet" href="/css/shortcodes.css">
    
    <link rel="stylesheet" href="/css/components.css">
    
    <link rel="stylesheet" href="/css/animations.css">
    
    <link rel="stylesheet" href="/css/media_queries.css">
    
    <link rel="stylesheet" href="/css/quantum-theme.css">
    

    
    <script>
      (function() {
        var theme = localStorage.getItem('theme');
        var H = document.documentElement;
        if (theme === 'dark-mode') {
          H.classList.add('dark-mode');
        } else if (theme === 'light-mode') {
          H.classList.remove('dark-mode');
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          H.classList.add('dark-mode');
        }
      })();
    </script>
</head></head>
  <body class="page-article"><nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/" class="nav-logo-link" title="See Hiong&#39;s Blog - Home">
          <span class="nav-site-title">
            <span class="nav-site-title__main">SEE HIONG’S</span>
            <span class="nav-site-title__sub">BLOG</span>
          </span>
        </a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            
            
            <a href="/posts/" class="nav-item-content active">Archives</a>
            
          </div>
          
          
          <div class="nav-item-wrapper">
            <a href="/tags/" class="nav-item-content ">Tags</a>
          </div>
          <div class="nav-item-wrapper">
            <a href="/about/" class="nav-item-content ">About</a>
          </div>
          <div class="nav-item-wrapper nav-search-toggle-wrapper">
            <button id="nav-search-toggle" class="nav-item-button" aria-label="Toggle search" title="Search">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" class="nav-item-icon">
                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
              </svg>
            </button>
          </div>
          
          
          <button id="theme-toggle" class="nav-item-button" aria-label="Toggle theme"></button> 
        </div>
      </div>
    </div>
  </div>
</nav>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const themeToggle = document.getElementById('theme-toggle');
    const H = document.documentElement; 

    if (H.classList.contains('dark-mode')) {
      themeToggle.textContent = 'Light Mode';
    } else {
      themeToggle.textContent = 'Dark Mode';
    }

    themeToggle.addEventListener('click', function() {
      H.classList.toggle('dark-mode');
      if (H.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark-mode');
        themeToggle.textContent = 'Light Mode';
      } else {
        localStorage.setItem('theme', 'light-mode');
        themeToggle.textContent = 'Dark Mode';
      }
    });
  });
</script><div id="content-wrapper">
        <main class="container" id="main-content">
<div class="main-content-area">
  <article class="post-layout container">

    <header class="post-header">
      <h1 class="post-title">From Routing Models to MIP: Solving Capacitated Vehicle Routing Problem</h1>

      <div class="post-meta">
        <span class="post-meta__date">
          <time datetime="2024-06-01T20:00:00&#43;08:00">June 1, 2024</time>
        </span>

        
          <span class="post-meta__author">Written by See Hiong</span>
        

        
          <span class="post-meta__tags">
            In:
            
              <a href="/tags/routing-model">Routing Model</a>
            
              , <a href="/tags/mip">MIP</a>
            
              , <a href="/tags/micronaut">Micronaut</a>
            
              , <a href="/tags/vrp">VRP</a>
            
              , <a href="/tags/cvrp">CVRP</a>
            
              , <a href="/tags/backend">Backend</a>
            
              , <a href="/tags/java">Java</a>
            
          </span>
        

        
      </div>
    </header>

    
      
      
      <div class="post-cover-container post-cover--artistic-blur-wrapper">
        
          <div class="post-cover-blur-background" style="--bg-image: url('/images/cvrp/from-routing-models-to-mip-solving-capacitated-vehicle-routing-problem.svg');"></div>
          <img src="/images/cvrp/from-routing-models-to-mip-solving-capacitated-vehicle-routing-problem.svg" alt="From Routing Models to MIP: Solving Capacitated Vehicle Routing Problem cover image" class="post-cover-image post-cover-image--artistic-blur">
        
      </div>
    

    <section class="post-content">
      <h2 id="problem-statement">Problem Statement</h2>
<p>In this post, I will follow the 






  <a href="https://developers.google.com/optimization/routing/vrp" target="_blank" rel="noopener noreferrer" >Vehicle Routing Problem</a>
 (VRP) with a focus on the capacitated vehicle routing problem (CVRP) and utilizing an alternative Mixed Integer Programming (MIP) approach.</p>
<h2 id="routing-model">Routing Model</h2>
<p>The main section of the program creates the index manager and the routing model.</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Create Routing Index Manager</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>RoutingIndexManager<span style="color:#fff"> </span>manager<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RoutingIndexManager<span style="color:#1f2328">(</span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleNumber</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">depot</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">// Create Routing Model</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>RoutingModel<span style="color:#fff"> </span>routing<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RoutingModel<span style="color:#1f2328">(</span>manager<span style="color:#1f2328">);</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="distance-callback">Distance Callback</h3>
<p>The code snippet initializes the transit callback to compute distances between nodes and sets up the arc costs for all vehicles in the VRP model to ensure that the solver considers the correct distances when optimizing the routes:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Create and register a transit callback</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>transitCallbackIndex<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">registerTransitCallback</span><span style="color:#1f2328">((</span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>fromIndex<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>toIndex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Convert from routing variable Index to user NodeIndex.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>fromNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>fromIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>toNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>toIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">long</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#0550ae">[</span>fromNode<span style="color:#0550ae">][</span>toNode<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">// Define cost of each arc.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">setArcCostEvaluatorOfAllVehicles</span><span style="color:#1f2328">(</span>transitCallbackIndex<span style="color:#1f2328">);</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="demand-callback-and-capacity-constraints">Demand Callback and Capacity Constraints</h3>
<p>The solver requires a demand callback, which returns the demand at each location, and a dimension for the vehicle capacity constraints:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Add Capacity constraint.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>demandCallbackIndex<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">registerUnaryTransitCallback</span><span style="color:#1f2328">((</span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>fromIndex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Convert from routing variable Index to user NodeIndex.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>fromNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>fromIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">demands</span><span style="color:#0550ae">[</span>fromNode<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">addDimensionWithVehicleCapacity</span><span style="color:#1f2328">(</span>demandCallbackIndex<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#57606a">// null capacity slack</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleCapacities</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#57606a">// vehicle maximum capacities</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">true</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#57606a">// start cumul to zero</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0a3069">&#34;Capacity&#34;</span><span style="color:#1f2328">);</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="changing-the-search-strategy">Changing the search strategy</h3>
<p>Since the routing solver does not always return the optimal solution, we can use a more advanced search strategy called guided local search, which enables escaping a local minimum. We can further tune our use case with other 






  <a href="https://developers.google.com/optimization/routing/routing_options" target="_blank" rel="noopener noreferrer" >Routing Options</a>
.</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Setting first solution heuristic.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>RoutingSearchParameters<span style="color:#fff"> </span>searchParameters<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>main<span style="color:#1f2328">.</span><span style="color:#1f2328">defaultRoutingSearchParameters</span><span style="color:#1f2328">()</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">toBuilder</span><span style="color:#1f2328">()</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">setFirstSolutionStrategy</span><span style="color:#1f2328">(</span>FirstSolutionStrategy<span style="color:#1f2328">.</span><span style="color:#1f2328">Value</span><span style="color:#1f2328">.</span><span style="color:#1f2328">PATH_CHEAPEST_ARC</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">setLocalSearchMetaheuristic</span><span style="color:#1f2328">(</span>LocalSearchMetaheuristic<span style="color:#1f2328">.</span><span style="color:#1f2328">Value</span><span style="color:#1f2328">.</span><span style="color:#1f2328">GUIDED_LOCAL_SEARCH</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">setTimeLimit</span><span style="color:#1f2328">(</span>Duration<span style="color:#1f2328">.</span><span style="color:#1f2328">newBuilder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">setSeconds</span><span style="color:#1f2328">(</span>60<span style="color:#1f2328">).</span><span style="color:#1f2328">build</span><span style="color:#1f2328">())</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="data-model">Data Model</h3>
<p>This is the data model:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Data</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Builder</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@AllArgsConstructor</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@NoArgsConstructor</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Serdeable.Serializable</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Serdeable.Deserializable</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">DataModel</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">double</span><span style="color:#0550ae">[][]</span><span style="color:#fff"> </span>distanceMatrix<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">long</span><span style="color:#0550ae">[]</span><span style="color:#fff"> </span>demands<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">long</span><span style="color:#0550ae">[]</span><span style="color:#fff"> </span>vehicleCapacities<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>vehicleNumber<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>depot<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="the-cvrp-service">The CVRP Service</h3>
<p>This is the Micronaut service for CVRP, with the printSolution method adapted from OR-Tools:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Singleton</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CVRPService</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">static</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Loader<span style="color:#1f2328">.</span><span style="color:#1f2328">loadNativeLibraries</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>CVRPSolution<span style="color:#fff"> </span><span style="color:#6639ba">solve</span><span style="color:#1f2328">(</span>DataModel<span style="color:#fff"> </span>data<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Create Routing Index Manager</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>RoutingIndexManager<span style="color:#fff"> </span>manager<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RoutingIndexManager<span style="color:#1f2328">(</span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleNumber</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">depot</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Create Routing Model</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>RoutingModel<span style="color:#fff"> </span>routing<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>RoutingModel<span style="color:#1f2328">(</span>manager<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Create and register a transit callback</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>transitCallbackIndex<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">registerTransitCallback</span><span style="color:#1f2328">((</span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>fromIndex<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>toIndex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#57606a">// Convert from routing variable Index to user NodeIndex.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>fromNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>fromIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>toNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>toIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">long</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#0550ae">[</span>fromNode<span style="color:#0550ae">][</span>toNode<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Define cost of each arc.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">setArcCostEvaluatorOfAllVehicles</span><span style="color:#1f2328">(</span>transitCallbackIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Add Capacity constraint.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>demandCallbackIndex<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">registerUnaryTransitCallback</span><span style="color:#1f2328">((</span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>fromIndex<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">-&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#57606a">// Convert from routing variable Index to user NodeIndex.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>fromNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>fromIndex<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">demands</span><span style="color:#0550ae">[</span>fromNode<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">});</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">addDimensionWithVehicleCapacity</span><span style="color:#1f2328">(</span>demandCallbackIndex<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#57606a">// null capacity slack</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleCapacities</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#57606a">// vehicle maximum capacities</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">true</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#57606a">// start cumul to zero</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#0a3069">&#34;Capacity&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Setting first solution heuristic.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>RoutingSearchParameters<span style="color:#fff"> </span>searchParameters<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>main<span style="color:#1f2328">.</span><span style="color:#1f2328">defaultRoutingSearchParameters</span><span style="color:#1f2328">()</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">toBuilder</span><span style="color:#1f2328">()</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">setFirstSolutionStrategy</span><span style="color:#1f2328">(</span>FirstSolutionStrategy<span style="color:#1f2328">.</span><span style="color:#1f2328">Value</span><span style="color:#1f2328">.</span><span style="color:#1f2328">PATH_CHEAPEST_ARC</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">setLocalSearchMetaheuristic</span><span style="color:#1f2328">(</span>LocalSearchMetaheuristic<span style="color:#1f2328">.</span><span style="color:#1f2328">Value</span><span style="color:#1f2328">.</span><span style="color:#1f2328">GUIDED_LOCAL_SEARCH</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">setTimeLimit</span><span style="color:#1f2328">(</span>Duration<span style="color:#1f2328">.</span><span style="color:#1f2328">newBuilder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">setSeconds</span><span style="color:#1f2328">(</span>60<span style="color:#1f2328">).</span><span style="color:#1f2328">build</span><span style="color:#1f2328">())</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#1f2328">.</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#57606a">// Solve the problem.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Assignment<span style="color:#fff"> </span>solution<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">solveWithParameters</span><span style="color:#1f2328">(</span>searchParameters<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>Map<span style="color:#0550ae">&lt;</span>Integer<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>vehicleMap<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleNumber</span><span style="color:#1f2328">;</span><span style="color:#fff"> </span><span style="color:#0550ae">++</span>i<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>index<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">start</span><span style="color:#1f2328">(</span>i<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>routeLoad<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>String<span style="color:#fff"> </span>route<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;&#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">while</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">isEnd</span><span style="color:#1f2328">(</span>index<span style="color:#1f2328">))</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>nodeIndex<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>index<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>routeLoad<span style="color:#fff"> </span><span style="color:#0550ae">+=</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">demands</span><span style="color:#0550ae">[</span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>nodeIndex<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>route<span style="color:#fff"> </span><span style="color:#0550ae">+=</span><span style="color:#fff"> </span>nodeIndex<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; Load(&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>routeLoad<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;) -&gt; &#34;</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">long</span><span style="color:#fff"> </span>previousIndex<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>index<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>index<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solution<span style="color:#1f2328">.</span><span style="color:#1f2328">value</span><span style="color:#1f2328">(</span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">nextVar</span><span style="color:#1f2328">(</span>index<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>route<span style="color:#fff"> </span><span style="color:#0550ae">+=</span><span style="color:#fff"> </span>manager<span style="color:#1f2328">.</span><span style="color:#1f2328">indexToNode</span><span style="color:#1f2328">(</span>routing<span style="color:#1f2328">.</span><span style="color:#1f2328">end</span><span style="color:#1f2328">(</span>i<span style="color:#1f2328">));</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>vehicleMap<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>i<span style="color:#1f2328">,</span><span style="color:#fff"> </span>route<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>CVRPSolution<span style="color:#1f2328">.</span><span style="color:#1f2328">builder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">objectiveValue</span><span style="color:#1f2328">(</span>solution<span style="color:#1f2328">.</span><span style="color:#1f2328">objectiveValue</span><span style="color:#1f2328">()).</span><span style="color:#1f2328">variableValue</span><span style="color:#1f2328">(</span>vehicleMap<span style="color:#1f2328">).</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="the-cvrp-controller">The CVRP Controller</h3>
<p>Here is the Micronaut controller for the CVRP:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Controller</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/cvrp&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CVRPController</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span>CVRPService<span style="color:#fff"> </span>cvrpService<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#6639ba">CVRPController</span><span style="color:#1f2328">(</span>CVRPService<span style="color:#fff"> </span>cvrpService<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span><span style="color:#1f2328">cvrpService</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>cvrpService<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Post</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/solve&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Produces</span><span style="color:#1f2328">(</span>MediaType<span style="color:#1f2328">.</span><span style="color:#1f2328">APPLICATION_JSON</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">@Consumes</span><span style="color:#1f2328">(</span>MediaType<span style="color:#1f2328">.</span><span style="color:#1f2328">APPLICATION_JSON</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>CVRPSolution<span style="color:#fff"> </span><span style="color:#6639ba">solve</span><span style="color:#1f2328">(</span><span style="color:#0550ae">@Body</span><span style="color:#fff"> </span>DataModel<span style="color:#fff"> </span>dataModel<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>cvrpService<span style="color:#1f2328">.</span><span style="color:#1f2328">solve</span><span style="color:#1f2328">(</span>dataModel<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="the-input">The Input</h3>
<p>This is the sample input from the OR-Tools:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&#34;distanceMatrix&#34;</span><span style="color:#1f2328">:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">548</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">696</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">582</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">548</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">684</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">696</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">742</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1084</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">594</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">480</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">674</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1016</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">868</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1210</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">684</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">992</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">878</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">810</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">742</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">400</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1278</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1164</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1130</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">788</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1552</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">754</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">696</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">992</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">114</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">650</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">878</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">844</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">890</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1232</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">628</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">822</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1164</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">560</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1358</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">582</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">878</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">114</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">764</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1118</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">400</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">708</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1050</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">674</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1244</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">650</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">228</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">240</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">582</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">628</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1050</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">708</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">878</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">764</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">228</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1004</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">890</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">856</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1278</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">480</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">810</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">342</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">320</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">742</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">856</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">696</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">844</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">342</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">810</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">696</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">320</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1084</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">742</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">742</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">890</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">240</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">342</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">422</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">810</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1084</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">400</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1232</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1118</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">582</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">342</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">878</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">764</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1152</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">502</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">594</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1278</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">400</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1004</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">810</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">878</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">114</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">650</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">844</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">480</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1164</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">628</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">890</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">696</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">422</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">764</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">114</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">674</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1130</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">822</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">708</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">628</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">856</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">320</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">308</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">342</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">422</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1016</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">788</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1164</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1050</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">320</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">650</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">342</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">764</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">776</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">868</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1552</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">560</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">674</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1050</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1278</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">742</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1084</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">810</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1152</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">274</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">388</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">422</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">764</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">798</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">[</span><span style="color:#0550ae">662</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1210</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">754</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1358</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1244</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">708</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">480</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">856</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">514</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">468</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">354</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">844</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">730</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">536</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">194</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">798</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&#34;demands&#34;</span><span style="color:#1f2328">:[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">2</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">4</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&#34;vehicleCapacities&#34;</span><span style="color:#1f2328">:[</span><span style="color:#0550ae">15</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">15</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">15</span><span style="color:#1f2328">,</span> <span style="color:#0550ae">15</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&#34;vehicleNumber&#34;</span><span style="color:#1f2328">:</span><span style="color:#0550ae">4</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0550ae">&#34;depot&#34;</span> <span style="color:#1f2328">:</span><span style="color:#0550ae">0</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="the-cvrpsolution">The CVRPSolution</h3>
<p>This is the CVRPSolution:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Data</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Builder</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@AllArgsConstructor</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@NoArgsConstructor</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Serdeable.Serializable</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span><span style="color:#cf222e">class</span> <span style="color:#1f2328">CVRPSolution</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span><span style="color:#cf222e">double</span><span style="color:#fff"> </span>objectiveValue<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">private</span><span style="color:#fff"> </span>Map<span style="color:#0550ae">&lt;</span>Integer<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>variableValue<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="solver-in-action">Solver in Action</h3>


































 
  
  





  <img src="/images/cvrp/cvrp-micronaut-postman-result.png"   alt="cvrp-micronaut-postman-result" class="sc-image sc-image-default"
       >


<h2 id="optional-solving-using-mip-approach">Optional: Solving using MIP Approach</h2>
<p>Let&rsquo;s create a <em>solveMIP</em> method in <strong>CVRPService.java</strong>:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Create the MIP solver</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>MPSolver<span style="color:#fff"> </span>solver<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPSolver<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;CVRP&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">OptimizationProblemType</span><span style="color:#1f2328">.</span><span style="color:#1f2328">CBC_MIXED_INTEGER_PROGRAMMING</span><span style="color:#1f2328">);</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="variables">Variables</h3>
<p>Let \( t \) be the decision variable for denoting that vehicle \( k \) will travel from node \( i \) to node \( j \). Let \( s \) be the decision variable for denoting that node \( i \) is fulfilled by vehicle \( k \).</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Variables: t[i][j][k] is 1 if vehicle k travels from node i to node j</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>MPVariable<span style="color:#0550ae">[][][]</span><span style="color:#fff"> </span>t<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPVariable<span style="color:#0550ae">[</span>numNodes<span style="color:#0550ae">][</span>numNodes<span style="color:#0550ae">][</span>numVehicles<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeIntVar</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;travel_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">// Variables: s[i][k] is 1 if node i is fulfilled by k</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>MPVariable<span style="color:#0550ae">[][]</span><span style="color:#fff"> </span>s<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPVariable<span style="color:#0550ae">[</span>numNodes<span style="color:#0550ae">][</span>numVehicles<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>s<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeIntVar</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;serve_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="objectives">Objectives</h3>
<p>Minimize the total distance travelled by all vehicles:</p>
$$ \sum_{k \in K} \sum_{i \in I} \sum_{j \in J} t_{i,j,k} \cdot \text{{distance matrix}}_{i,j} $$<p>This is implemented as:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Objective: Minimize the total distance traveled</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>MPObjective<span style="color:#fff"> </span>objective<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">objective</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>objective<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff">  </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">]</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>objective<span style="color:#1f2328">.</span><span style="color:#1f2328">setMinimization</span><span style="color:#1f2328">();</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="constraints">Constraints</h3>
<ol>
<li>Each vehicle starts at the depot:</li>
</ol>
$$ \sum_{j} t_{0,j,k} = 1 \quad \forall k $$<ol start="2">
<li>Each vehicle ends at the depot:</li>
</ol>
$$ \sum_{i} t_{i,0,k} = 1 \quad \forall k $$<p>This is implemented as:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// 1. Each vehicle starts at the depot</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;depot_start_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>depot<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">// 2. Each vehicle ends at the depot</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;deport_end_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>depot<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><ol start="3">
<li>Each Node Is Visited Exactly Once by Exactly One Vehicle (Excluding Depot):</li>
</ol>
$$ \sum_{i \neq j} x_{i,j,k} = 1 \quad \forall j $$<p>This is implemented as:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// 3. Each node is visited exactly once by exactly one vehicle (excluding depot)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;visit_node_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><ol start="4">
<li><strong>Flow Conservation</strong>: If a vehicle arrives at a node, it must leave:</li>
</ol>
$$ \sum_{\substack{i \neq n}} t_{i,n,k} - \sum_{\substack{j \neq n}} t_{n,j,k} = 0, \quad \forall n, k $$<p>This is implemented as:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// 4. Flow conservation: if a vehicle arrives at a node, it must leave</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>n<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>n<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>n<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">  </span><span style="color:#57606a">// Include depot to enforce return</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;flow_conservation_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>n<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>n<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>n<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>n<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>n<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><ol start="5">
<li><strong>Capacity constraints</strong>: For each vehicle $k $, ensure that the total demand on its route does not exceed its capacity:</li>
</ol>
$$ \sum_{i \neq j} t_{i,j,k} \cdot \text{{demand}}_i \leq \text{{vehicle capacity}}_k \quad \forall k $$<p>This is implemented as:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// 5. Capacity constraints</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleCapacities</span><span style="color:#0550ae">[</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;capacity_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">demands</span><span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><ol start="6">
<li><strong>Subtour elimination constraints</strong>: To ensure that there are no subtours (sub-routes) in the solution, we introduce auxiliary variables
\( 𝑢 \) for each customer node \( i \). These variables help enforce the sequence in which nodes are visited, preventing isolated cycles that do not include the depot. Ths subtour elimination constraint is given by:</li>
</ol>
$$ u_i - u_j + M \cdot t_{i,j,k} \leq M - 1, \quad \forall i \neq j, \forall k $$<p>This is implemented as:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#57606a">// Create auxiliary variables for subtour elimination</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span>MPVariable<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>u<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPVariable<span style="color:#0550ae">[</span>numNodes<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>u<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeIntVar</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;u_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">// 6. Subtour elimination constraints</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>MPConstraint<span style="color:#fff"> </span>subtourConstraint<span style="color:#fff">  </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span><span style="color:#0550ae">-</span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">infinity</span><span style="color:#1f2328">(),</span><span style="color:#fff"> </span>numNodes<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;subtour_elimination_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>subtourConstraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>u<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>subtourConstraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>u<span style="color:#0550ae">[</span>j<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>subtourConstraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="putting-it-together">Putting it together</h3>
<p>This is the sovleMIP method in <em>CVRPService.java</em>:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>CVRPSolution<span style="color:#fff"> </span><span style="color:#6639ba">solveMIP</span><span style="color:#1f2328">(</span>DataModel<span style="color:#fff"> </span>data<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>numNodes<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#1f2328">.</span><span style="color:#1f2328">length</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>numVehicles<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleNumber</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">final</span><span style="color:#fff"> </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>depot<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">depot</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Create the MIP solver</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPSolver<span style="color:#fff"> </span>solver<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPSolver<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;CVRP&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">OptimizationProblemType</span><span style="color:#1f2328">.</span><span style="color:#1f2328">CBC_MIXED_INTEGER_PROGRAMMING</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Variables: t[i][j][k] is 1 if vehicle k travels from node i to node j</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPVariable<span style="color:#0550ae">[][][]</span><span style="color:#fff"> </span>t<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPVariable<span style="color:#0550ae">[</span>numNodes<span style="color:#0550ae">][</span>numNodes<span style="color:#0550ae">][</span>numVehicles<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeIntVar</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;travel_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Variables: s[i][k] is 1 if node i is served by k</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPVariable<span style="color:#0550ae">[][]</span><span style="color:#fff"> </span>s<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPVariable<span style="color:#0550ae">[</span>numNodes<span style="color:#0550ae">][</span>numVehicles<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>s<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeIntVar</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;serve_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Objective: Minimize the total distance traveled</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPObjective<span style="color:#fff"> </span>objective<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">objective</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>objective<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff">  </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">distanceMatrix</span><span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">]</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>objective<span style="color:#1f2328">.</span><span style="color:#1f2328">setMinimization</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Constraints:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 1. Each vehicle starts at the depot</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;depot_start_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>depot<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 2. Each vehicle ends at the depot</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;deport_end_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>depot<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 3. Each node is visited exactly once by exactly one vehicle (excluding depot)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;visit_node_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 4. Flow conservation: if a vehicle arrives at a node, it must leave</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>n<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>n<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>n<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">  </span><span style="color:#57606a">// Include depot to enforce return</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;flow_conservation_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>n<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>n<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>n<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>n<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>n<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 5. Capacity constraints</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>MPConstraint<span style="color:#fff"> </span>constraint<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">vehicleCapacities</span><span style="color:#0550ae">[</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;capacity_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>constraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>data<span style="color:#1f2328">.</span><span style="color:#1f2328">demands</span><span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Create auxiliary variables for subtour elimination</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPVariable<span style="color:#0550ae">[]</span><span style="color:#fff"> </span>u<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>MPVariable<span style="color:#0550ae">[</span>numNodes<span style="color:#0550ae">]</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>u<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeIntVar</span><span style="color:#1f2328">(</span>0<span style="color:#1f2328">,</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;u_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// 6. Subtour elimination constraints</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>1<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>i<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>MPConstraint<span style="color:#fff"> </span>subtourConstraint<span style="color:#fff">  </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">makeConstraint</span><span style="color:#1f2328">(</span><span style="color:#0550ae">-</span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">infinity</span><span style="color:#1f2328">(),</span><span style="color:#fff"> </span>numNodes<span style="color:#fff"> </span><span style="color:#0550ae">-</span><span style="color:#fff"> </span>1<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;subtour_elimination_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>i<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34;_&#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>k<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>subtourConstraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>u<span style="color:#0550ae">[</span>i<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>subtourConstraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>u<span style="color:#0550ae">[</span>j<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">-</span>1<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>subtourConstraint<span style="color:#1f2328">.</span><span style="color:#1f2328">setCoefficient</span><span style="color:#1f2328">(</span>t<span style="color:#0550ae">[</span>i<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Solve</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">setTimeLimit</span><span style="color:#1f2328">(</span>10000<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">ResultStatus</span><span style="color:#fff"> </span>resultStatus<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>solver<span style="color:#1f2328">.</span><span style="color:#1f2328">solve</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">// Check the result</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>Map<span style="color:#0550ae">&lt;</span>Integer<span style="color:#1f2328">,</span><span style="color:#fff"> </span>String<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span>vehicleMap<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">new</span><span style="color:#fff"> </span>HashMap<span style="color:#0550ae">&lt;&gt;</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>resultStatus<span style="color:#fff"> </span><span style="color:#0550ae">==</span><span style="color:#fff"> </span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">ResultStatus</span><span style="color:#1f2328">.</span><span style="color:#1f2328">OPTIMAL</span><span style="color:#fff"> </span><span style="color:#0550ae">||</span><span style="color:#fff"> </span>resultStatus<span style="color:#fff"> </span><span style="color:#0550ae">==</span><span style="color:#fff"> </span>MPSolver<span style="color:#1f2328">.</span><span style="color:#1f2328">ResultStatus</span><span style="color:#1f2328">.</span><span style="color:#1f2328">FEASIBLE</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numVehicles<span style="color:#1f2328">;</span><span style="color:#fff"> </span>k<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>currentNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>depot<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>String<span style="color:#fff"> </span>route<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>String<span style="color:#1f2328">.</span><span style="color:#1f2328">valueOf</span><span style="color:#1f2328">(</span>depot<span style="color:#1f2328">);</span><span style="color:#fff">  </span><span style="color:#57606a">// Start from the depot</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#cf222e">while</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">true</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">boolean</span><span style="color:#fff"> </span>routeContinues<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">false</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">for</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#cf222e">int</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>0<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&lt;</span><span style="color:#fff"> </span>numNodes<span style="color:#1f2328">;</span><span style="color:#fff"> </span>j<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span>currentNode<span style="color:#fff"> </span><span style="color:#0550ae">!=</span><span style="color:#fff"> </span>j<span style="color:#fff"> </span><span style="color:#0550ae">&amp;&amp;</span><span style="color:#fff"> </span>t<span style="color:#0550ae">[</span>currentNode<span style="color:#0550ae">][</span>j<span style="color:#0550ae">][</span>k<span style="color:#0550ae">]</span><span style="color:#1f2328">.</span><span style="color:#1f2328">solutionValue</span><span style="color:#1f2328">()</span><span style="color:#fff"> </span><span style="color:#0550ae">==</span><span style="color:#fff"> </span>1<span style="color:#1f2328">.</span><span style="color:#1f2328">0</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span>route<span style="color:#fff"> </span><span style="color:#0550ae">+=</span><span style="color:#fff"> </span><span style="color:#0a3069">&#34; -&gt; &#34;</span><span style="color:#fff"> </span><span style="color:#0550ae">+</span><span style="color:#fff"> </span>j<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span>currentNode<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>j<span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span>routeContinues<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                        </span><span style="color:#cf222e">break</span><span style="color:#1f2328">;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#cf222e">if</span><span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>routeContinues<span style="color:#fff"> </span><span style="color:#0550ae">||</span><span style="color:#fff"> </span>currentNode<span style="color:#fff"> </span><span style="color:#0550ae">==</span><span style="color:#fff"> </span>depot<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span><span style="color:#cf222e">break</span><span style="color:#1f2328">;</span><span style="color:#fff">  </span><span style="color:#57606a">// No further route found for this vehicle</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>vehicleMap<span style="color:#1f2328">.</span><span style="color:#1f2328">put</span><span style="color:#1f2328">(</span>k<span style="color:#1f2328">,</span><span style="color:#fff"> </span>route<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>CVRPSolution<span style="color:#1f2328">.</span><span style="color:#1f2328">builder</span><span style="color:#1f2328">().</span><span style="color:#1f2328">objectiveValue</span><span style="color:#1f2328">(</span>objective<span style="color:#1f2328">.</span><span style="color:#1f2328">value</span><span style="color:#1f2328">()).</span><span style="color:#1f2328">variableValue</span><span style="color:#1f2328">(</span>vehicleMap<span style="color:#1f2328">).</span><span style="color:#1f2328">build</span><span style="color:#1f2328">();</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="the-updated-controller">The updated controller</h3>
<p>This is the refactored CVRPController.java:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#0550ae">@Post</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;/solveMIP&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Produces</span><span style="color:#1f2328">(</span>MediaType<span style="color:#1f2328">.</span><span style="color:#1f2328">APPLICATION_JSON</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">@Consumes</span><span style="color:#1f2328">(</span>MediaType<span style="color:#1f2328">.</span><span style="color:#1f2328">APPLICATION_JSON</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">public</span><span style="color:#fff"> </span>CVRPSolution<span style="color:#fff"> </span><span style="color:#6639ba">solveMIP</span><span style="color:#1f2328">(</span><span style="color:#0550ae">@Body</span><span style="color:#fff"> </span>DataModel<span style="color:#fff"> </span>dataModel<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">return</span><span style="color:#fff"> </span>cvrpService<span style="color:#1f2328">.</span><span style="color:#1f2328">solveMIP</span><span style="color:#1f2328">(</span>dataModel<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h3 id="mip-solver-in-action">MIP Solver in Action</h3>
<p>This is the result for the sample data:</p>


































 
  
  





  <img src="/images/cvrp/cvrp-mip-micronaut-postman-result.png"   alt="cvrp-mip-micronaut-postman-result" class="sc-image sc-image-default"
       >


<p>The MIP approach provides a precise method for solving the Capacitated Vehicle Routing Problem, offering optimal solutions but with higher computational demands. This makes it less suitable for very large instances or real-time applications compared to heuristic methods. While MIP handles complex constraints more flexibly, traditional routing models are faster and more scalable. Therefore, the choice between MIP and traditional methods depends on the problem&rsquo;s requirements, such as accuracy, size, and available computational resources. MIP remains a powerful tool for tackling challenging optimization problems in logistics and transportation.</p>

    </section>

    <nav class="post-navigation">
      <div class="nav-links">
        
          <div class="nav-previous">
            <a href="/posts/2024/05/solving-facility-location-problem-with-or-tools-and-micronaut/" rel="prev">
              <span class="meta-nav">← Previous</span>
              <span class="post-title">Solving Facility Location Problem with OR-Tools and Micronaut</span>
            </a>
          </div>
        
        
          <div class="nav-next">
            <a href="/posts/2024/06/planning-gift-deliveries-with-qgis/" rel="next">
              <span class="meta-nav">Next →</span>
              <span class="post-title">Planning Gift Deliveries With QGIS</span>
            </a>
          </div>
        
      </div>
    </nav>

    
<div class="giscus-comments-container">
</div>

<script>
  (function() {
    'use strict';

    const getGiscusTheme = () => {
      const storedTheme = localStorage.getItem('theme'); 
      if (storedTheme) {
        return storedTheme === 'dark-mode' ? 'dark' : 'light';
      }
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };

    const setGiscusFrameTheme = (theme) => {
      const iframe = document.querySelector('iframe.giscus-frame');
      if (iframe && iframe.contentWindow) {
        iframe.contentWindow.postMessage({ giscus: { setConfig: { theme: theme } } }, 'https://giscus.app');
      }
    };

    const loadGiscus = () => {
      const giscusContainer = document.querySelector('.giscus-comments-container');
      if (!giscusContainer) {
        console.warn('Giscus container not found.');
        return;
      }

      while (giscusContainer.firstChild) {
        giscusContainer.removeChild(giscusContainer.firstChild);
      }

      const giscusScript = document.createElement('script');
      const giscusAttributes = {
        "src": "https://giscus.app/client.js",
        "data-repo":             "seehiong\/seehiong.github.io",
        "data-repo-id":          "R_kgDOJg7Puw",
        "data-category":         "General",
        "data-category-id":      "DIC_kwDOJg7Pu84Cbyhc",
        "data-mapping":          "url", 
        "data-strict":           "0",
        "data-reactions-enabled":"1",
        "data-emit-metadata":    "0",
        "data-input-position":   "top", 
        "data-theme":            getGiscusTheme(), 
        "data-lang":             "en",
        "data-loading":          "lazy",
        "crossorigin":           "anonymous",
        "async":                 "true", 
      };

      if (!giscusAttributes["data-repo"] || !giscusAttributes["data-repo-id"] || !giscusAttributes["data-category-id"]) {
          console.error("Giscus parameters (giscusRepo, giscusRepoId, giscusCategoryId) are not configured in hugo.toml.");
          giscusContainer.innerHTML = "<p style='color: var(--text-secondary);'>Giscus comments are not configured correctly. Please check site parameters.</p>";
          return;
      }

      Object.entries(giscusAttributes).forEach(
        ([key, value]) => giscusScript.setAttribute(key, value)
      );
      giscusContainer.appendChild(giscusScript);
    };

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadGiscus);
    } else {
        loadGiscus();
    }

    const htmlElement = document.documentElement;
    const observer = new MutationObserver((mutationsList) => {
      for (const mutation of mutationsList) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          setGiscusFrameTheme(getGiscusTheme());
        }
      }
    });
    observer.observe(htmlElement, { attributes: true });

  })();
</script>


  </article>
</div>
</main>
    </div>

    
    <div id="search-modal-overlay" class="search-modal-overlay" style="display: none;">
      <div id="search-modal-content" class="search-modal-content">
        <button id="search-modal-close" class="search-modal-close" aria-label="Close search" title="Close search">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
        <input type="search" id="modal-search-input" class="modal-search-input" placeholder="Search content..." aria-label="Search input">
        <div id="modal-search-results" class="modal-search-results">
        </div>
      </div>
    </div>
    

  <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js" defer></script>
  <script>
    (function() {
      'use strict';

      window.addEventListener('DOMContentLoaded', () => {
        const searchModalOverlay = document.getElementById('search-modal-overlay');
        const searchModalContent = document.getElementById('search-modal-content');
        const searchModalCloseButton = document.getElementById('search-modal-close');
        const searchToggleButton = document.getElementById('nav-search-toggle');
        const searchInputTarget = document.getElementById('modal-search-input');
        const searchResultsTarget = document.getElementById('modal-search-results');

        let fuseInstance = null;
        let searchData = [];

        const loadSearchData = async () => {
          if (searchData.length === 0 && !fuseInstance) {
            try {
              const response = await fetch('\/index.json');
              if (!response.ok) {
                throw new Error(`HTTP error loading index.json! status: ${response.status}`);
              }
              searchData = await response.json();
              initializeFuse();
            } catch (e) {
              console.error("[SearchSetup] Error loading search data:", e);
              if (searchResultsTarget) searchResultsTarget.innerHTML = "<p>Error loading search index.</p>";
            }
          } else if (searchData.length > 0 && !fuseInstance){
            initializeFuse();
          }
        };

        const initializeFuse = () => {
          if (searchData.length > 0 && !fuseInstance) {
            const options = {
              keys: [
                { name: 'title', weight: 0.7 }, { name: 'summary', weight: 0.5 },
                { name: 'content', weight: 0.3 }, { name: 'tags', weight: 0.4 }
              ],
              includeScore: true, threshold: 0.4, minMatchCharLength: 2,
            };
            fuseInstance = new Fuse(searchData, options);
          }
        };

        const performSearch = () => {
          if (!fuseInstance || !searchInputTarget || !searchResultsTarget) return;
          const query = searchInputTarget.value.trim();
          searchResultsTarget.innerHTML = '';
          if (query.length < 2) return;

          const results = fuseInstance.search(query);
          if (results.length > 0) {
            const ul = document.createElement('ul');
            ul.className = 'search-results-list';
            results.slice(0, 10).forEach(result => {
              const item = result.item;
              const li = document.createElement('li');
              li.className = 'search-result-item';
              const a = document.createElement('a');
              a.href = item.permalink;
              a.textContent = item.title;
              li.appendChild(a);
              ul.appendChild(li);
            });
            searchResultsTarget.appendChild(ul);
          } else {
            searchResultsTarget.innerHTML = '<p>No results found.</p>';
          }
        };

        const openSearchModal = async () => {
          await loadSearchData();
          if (searchInputTarget) searchInputTarget.value = '';
          if (searchResultsTarget) searchResultsTarget.innerHTML = '';

          if (searchModalOverlay) {
            searchModalOverlay.style.display = 'flex';
            setTimeout(() => searchModalOverlay.classList.add('active'), 10);
          } else { return; }

          if (searchInputTarget) setTimeout(() => searchInputTarget.focus(), 50);
          if (searchToggleButton) searchToggleButton.classList.add('active');
        };

        const closeSearchModal = () => {
          if (searchModalOverlay) {
            searchModalOverlay.classList.remove('active');
            setTimeout(() => searchModalOverlay.style.display = 'none', 300);
          }
          if (searchToggleButton) searchToggleButton.classList.remove('active');
        };

        if (searchToggleButton) {
          searchToggleButton.addEventListener('click', (e) => {
            e.stopPropagation();
            if (searchModalOverlay && searchModalOverlay.classList.contains('active')) {
              closeSearchModal();
            } else {
              openSearchModal();
            }
          });
        } else { console.error("[SearchSetup] #nav-search-toggle button not found."); }

        if (searchModalCloseButton) { searchModalCloseButton.addEventListener('click', closeSearchModal); }
        if (searchModalOverlay && searchModalContent) {
          searchModalOverlay.addEventListener('click', (event) => {
            if (event.target === searchModalOverlay) closeSearchModal();
          });
        }
        document.addEventListener('keydown', (event) => {
          if (event.key === 'Escape' && searchModalOverlay && searchModalOverlay.classList.contains('active')) {
            closeSearchModal();
          }
        });
        if (searchInputTarget) {
          let debounceTimer;
          searchInputTarget.addEventListener('input', () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(performSearch, 300);
          });
        }
      });
    })();
  </script>

    

    

  <script>
    MathJax = {
      tex: {
        displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        inlineMath: [['\\(', '\\)']], 
        processEscapes: true,
        processEnvironments: true,
        tags: 'ams' 
      },
      svg: {
        fontCache: 'global' 
      },
      chtml: {
        fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'], 
        ignoreHtmlClass: 'tex2jax_ignore', 
        processHtmlClass: 'tex2jax_process'
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<footer class="footer-main simplified-footer">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="footer-content">
        <div class="copyright-line">
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> © 2025 See Hiong. All rights reserved.
        </div>
        <div class="social-links">
          
            <a href="https://github.com/seehiong" target="_blank" title="GitHub" class="social-link" aria-label="GitHub">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </a>
          
          
            <a href="https://www.linkedin.com/in/seehiong/" target="_blank" title="LinkedIn" class="social-link" aria-label="LinkedIn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
            </a>
          
          
            <a href="/index.xml" target="_blank" title="RSS" class="social-link" aria-label="RSS Feed">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
            </a>
          
        </div>
      </div>
    </div>
  </div>
</footer>
        <script src="/js/animation.js" defer></script>
    
        <script src="/js/code-copy.js" defer></script>
    
        <script src="/js/scroll-header.js" defer></script>
       
  </body>
</html>