<!DOCTYPE html>
<html lang="en">
  <head><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <link rel="icon" href="/img/favicon.ico">
    

    <meta property="og:url" content="https://seehiong.github.io/posts/2023/04/developing-byo-gpt-with-flutter/">
  <meta property="og:site_name" content="See Hiong&#39;s Blog">
  <meta property="og:title" content="Developing BYO-GPT with Flutter">
  <meta property="og:description" content="I dedicate around 10 minutes to create BYO-GPT, a Flutter app that allows easy interaction with ChatGPT through OpenAI’s API. After installing Flutter, setting up the project, and creating necessary widgets and models, I utilize the OpenAI API for chat completion. The app includes user and GPT message bubbles, as well as a user input section with a GPT icon. By employing the Provider package, the app efficiently manages state changes. Additionally, I provide the option to switch models for experimentation. Overall, BYO-GPT provides a user-friendly interface for seamless communication with ChatGPT.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-04-29T20:00:00+08:00">
    <meta property="article:modified_time" content="2023-04-29T20:00:00+08:00">
    <meta property="article:tag" content="ChatGPT">
    <meta property="article:tag" content="ByoGPT">
    <meta property="article:tag" content="GPT">
    <meta property="article:tag" content="Flutter">
    <meta property="article:tag" content="IDE">
    <meta property="article:tag" content="FE">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Developing BYO-GPT with Flutter">
  <meta name="twitter:description" content="I dedicate around 10 minutes to create BYO-GPT, a Flutter app that allows easy interaction with ChatGPT through OpenAI’s API. After installing Flutter, setting up the project, and creating necessary widgets and models, I utilize the OpenAI API for chat completion. The app includes user and GPT message bubbles, as well as a user input section with a GPT icon. By employing the Provider package, the app efficiently manages state changes. Additionally, I provide the option to switch models for experimentation. Overall, BYO-GPT provides a user-friendly interface for seamless communication with ChatGPT.">

  <meta itemprop="name" content="Developing BYO-GPT with Flutter">
  <meta itemprop="description" content="I dedicate around 10 minutes to create BYO-GPT, a Flutter app that allows easy interaction with ChatGPT through OpenAI’s API. After installing Flutter, setting up the project, and creating necessary widgets and models, I utilize the OpenAI API for chat completion. The app includes user and GPT message bubbles, as well as a user input section with a GPT icon. By employing the Provider package, the app efficiently manages state changes. Additionally, I provide the option to switch models for experimentation. Overall, BYO-GPT provides a user-friendly interface for seamless communication with ChatGPT.">
  <meta itemprop="datePublished" content="2023-04-29T20:00:00+08:00">
  <meta itemprop="dateModified" content="2023-04-29T20:00:00+08:00">
  <meta itemprop="wordCount" content="1522">
  <meta itemprop="keywords" content="ChatGPT,ByoGPT,GPT,Flutter,IDE,FE,Frontend"><title>Developing BYO-GPT with Flutter | See Hiong&#39;s Blog</title>

    <link rel="canonical" href="https://seehiong.github.io/posts/2023/04/developing-byo-gpt-with-flutter/">

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
    
    <link rel="stylesheet" href="/css/variables.css">
    
    <link rel="stylesheet" href="/css/base.css">
    
    <link rel="stylesheet" href="/css/layout.css">
    
    <link rel="stylesheet" href="/css/header.css">
    
    <link rel="stylesheet" href="/css/header.css">
    
    <link rel="stylesheet" href="/css/cards.css">
    
    <link rel="stylesheet" href="/css/content_elements.css">
    
    <link rel="stylesheet" href="/css/codeblocks.css">
    
    <link rel="stylesheet" href="/css/page_specific.css">
    
    <link rel="stylesheet" href="/css/shortcodes.css">
    
    <link rel="stylesheet" href="/css/components.css">
    
    <link rel="stylesheet" href="/css/animations.css">
    
    <link rel="stylesheet" href="/css/media_queries.css">
    
    <link rel="stylesheet" href="/css/quantum-theme.css">
    

    
    <script>
      (function() {
        var theme = localStorage.getItem('theme');
        var H = document.documentElement;
        if (theme === 'dark-mode') {
          H.classList.add('dark-mode');
        } else if (theme === 'light-mode') {
          H.classList.remove('dark-mode');
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          H.classList.add('dark-mode');
        }
      })();
    </script>
</head></head>
  <body class="page-article"><nav class="nav">
  <div class="nav-wrapper">
    <div class="nav-content-wrapper">
      <div class="nav-content">
        <a href="/" class="nav-logo-link" title="See Hiong&#39;s Blog - Home">
          
          
          <img src="/images/blog_logo.png" alt="See Hiong&#39;s Blog Logo" class="nav-logo-image">
        </a>
        <div class="nav-menu">
          <div class="nav-item-wrapper">
            
            
            <a href="/posts/" class="nav-item-content active">Archives</a>
            
          </div>
          
          
          <div class="nav-item-wrapper">
            <a href="/tags/" class="nav-item-content ">Tags</a>
          </div>
          <div class="nav-item-wrapper">
            <a href="/about/" class="nav-item-content ">About</a>
          </div>
          <div class="nav-item-wrapper nav-search-toggle-wrapper">
            <button id="nav-search-toggle" class="nav-item-button" aria-label="Toggle search" title="Search">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" class="nav-item-icon">
                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
              </svg>
            </button>
          </div>
          
          
          <button id="theme-toggle" class="nav-item-button" aria-label="Toggle theme"></button> 
        </div>
      </div>
    </div>
  </div>
</nav>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const themeToggle = document.getElementById('theme-toggle');
    const H = document.documentElement; 

    if (H.classList.contains('dark-mode')) {
      themeToggle.textContent = 'Light Mode';
    } else {
      themeToggle.textContent = 'Dark Mode';
    }

    themeToggle.addEventListener('click', function() {
      H.classList.toggle('dark-mode');
      if (H.classList.contains('dark-mode')) {
        localStorage.setItem('theme', 'dark-mode');
        themeToggle.textContent = 'Light Mode';
      } else {
        localStorage.setItem('theme', 'light-mode');
        themeToggle.textContent = 'Dark Mode';
      }
    });
  });
</script><div id="content-wrapper">
        <main class="container" id="main-content">
<div class="main-content-area">
  <article class="post-layout container">

    <header class="post-header">
      <h1 class="post-title">Developing BYO-GPT with Flutter</h1>

      <div class="post-meta">
        <span class="post-meta__date">
          <time datetime="2023-04-29T20:00:00&#43;08:00">April 29, 2023</time>
        </span>

        
          <span class="post-meta__author">Written by See Hiong</span>
        

        
          <span class="post-meta__tags">
            In:
            
              <a href="/tags/chatgpt">ChatGPT</a>
            
              , <a href="/tags/byogpt">ByoGPT</a>
            
              , <a href="/tags/gpt">GPT</a>
            
              , <a href="/tags/flutter">Flutter</a>
            
              , <a href="/tags/ide">IDE</a>
            
              , <a href="/tags/fe">FE</a>
            
              , <a href="/tags/frontend">Frontend</a>
            
          </span>
        

        
      </div>
    </header>

    
      
      
      <div class="post-cover-container post-cover--artistic-blur-wrapper">
        
          <div class="post-cover-blur-background" style="--bg-image: url('/images/byogpt/byo-gpt-feature.png');"></div>
          <img src="/images/byogpt/byo-gpt-feature.png" alt="Developing BYO-GPT with Flutter cover image" class="post-cover-image post-cover-image--artistic-blur">
        
      </div>
    

    <section class="post-content">
      <p>Developing a user-friendly interface to converse with ChatGPT via OpenAI&rsquo;s API with your own openAI API token.</p>
<h2 id="developing-byo-gpt-with-flutter">Developing BYO-GPT with Flutter</h2>
<p><em>(Total Setup Time: 10 mins)</em></p>
<p>In this post, I will develop a &ldquo;Bring Your Own - Generative Pre-Trained Transformer&rdquo;, a user-friendly interface to converse with ChatGPT via 






  <a href="https://platform.openai.com/" target="_blank" rel="noopener noreferrer" >OpenAI&rsquo;s API</a>
 with 






  <a href="https://flutter.dev/" target="_blank" rel="noopener noreferrer" >Flutter</a>
.</p>
<h2 id="installing-flutter-and-ide">Installing Flutter and IDE</h2>
<p><em>(4 mins)</em></p>
<p>You may download the latest 






  <a href="https://docs.flutter.dev/get-started/install/windows" target="_blank" rel="noopener noreferrer" >Flutter SDK</a>
 and follow the installation guide and update your path. To check the current version, you may use <em>flutter &ndash;version</em>:</p>


































 
  
  





  <img src="/images/byogpt/flutter-version.png"   alt="flutter-version" class="sc-image sc-image-default"
       >


<p>You may use any IDE but for me, I am using 






  <a href="https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer" >VSCode</a>
, with Dart and Flutter plugins installed.</p>
<h2 id="setting-project-up">Setting project up</h2>
<p><em>(1 min)</em></p>
<p>You may start a flutter project by issuing <em>flutter create project_byogpt</em>. This is my initial pubspec.yaml. You may perform a manual dependency refresh with <em>flutter pub get</em> command:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#0550ae">name</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>project_byogpt<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">description</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>A new Flutter project.<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">publish_to</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;none&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">version</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0550ae">1.0.0+1</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">environment</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">sdk</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#0a3069">&#39;&gt;=2.19.6 &lt;3.0.0&#39;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">dependencies</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">flutter</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">sdk</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>flutter<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">cupertino_icons</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>^1.0.2<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">http</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>^0.13.5<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">provider</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>^6.0.5<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">dev_dependencies</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">flutter_test</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">sdk</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>flutter<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">flutter_lints</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span>^2.0.0<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#0550ae">flutter</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">uses-material-design</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>To follow through this guide, you may replace your main.dart with:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:flutter/material.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">void</span> main<span style="color:#1f2328">()</span> <span style="color:#0550ae">=&gt;</span> runApp<span style="color:#1f2328">(</span><span style="color:#cf222e">const</span> MyApp<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MyApp</span> <span style="color:#cf222e">extends</span> StatelessWidget <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">const</span> MyApp<span style="color:#1f2328">({</span><span style="color:#cf222e">super</span><span style="color:#1f2328">.</span>key<span style="color:#1f2328">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f6f8fa;background-color:#82071e">@</span>override
</span></span><span style="display:flex;"><span>  Widget build<span style="color:#1f2328">(</span>BuildContext context<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> MaterialApp<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">title:</span> <span style="color:#0a3069">&#34;BYO-GPT&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">theme:</span> ThemeData<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">primarySwatch:</span> Colors<span style="color:#1f2328">.</span>green<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">home:</span> Scaffold<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">appBar:</span> AppBar<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">title:</span> <span style="color:#cf222e">const</span> Text<span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;BYO-GPT&#39;</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">body:</span> Stack<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">children:</span> <span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>            Container<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>black<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">margin:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>only<span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">bottom:</span> <span style="color:#0550ae">80</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">child:</span> <span style="color:#cf222e">const</span> Placeholder<span style="color:#1f2328">(),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">const</span> Placeholder<span style="color:#1f2328">(),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>At any time, you may start running the app via menu <em>Run &gt; Run Without Debugging</em>. You will see similar result in the default Chrome browser:</p>


































 
  
  





  <img src="/images/byogpt/flutter-first-run.png"   alt="flutter-first-run" class="sc-image sc-image-default"
       >


<h2 id="creating-the-widgets-and-models">Creating the Widgets and Models</h2>
<p><em>(3 mins)</em></p>
<p>First, I will create the user&rsquo;s bubble (under <em>lib/widgets/user_bubble.dart</em>) for displaying all user&rsquo;s prompts:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:flutter/material.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserBubble</span> <span style="color:#cf222e">extends</span> StatelessWidget <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">const</span> UserBubble<span style="color:#1f2328">(</span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span>message<span style="color:#1f2328">,</span> <span style="color:#1f2328">{</span><span style="color:#cf222e">super</span><span style="color:#1f2328">.</span>key<span style="color:#1f2328">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">final</span> <span style="color:#cf222e">String</span> message<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f6f8fa;background-color:#82071e">@</span>override
</span></span><span style="display:flex;"><span>  Widget build<span style="color:#1f2328">(</span>BuildContext context<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> Stack<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">children:</span> <span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>        Row<span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">mainAxisAlignment:</span> MainAxisAlignment<span style="color:#1f2328">.</span>end<span style="color:#1f2328">,</span> <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>          Container<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">decoration:</span> BoxDecoration<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">color:</span> Theme<span style="color:#1f2328">.</span>of<span style="color:#1f2328">(</span>context<span style="color:#1f2328">).</span>primaryColorDark<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">borderRadius:</span> <span style="color:#cf222e">const</span> BorderRadius<span style="color:#1f2328">.</span>only<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">topLeft:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">topRight:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">bottomLeft:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">bottomRight:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">0</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">width:</span> <span style="color:#0550ae">200</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">padding:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>symmetric<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">vertical:</span> <span style="color:#0550ae">10</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">horizontal:</span> <span style="color:#0550ae">16</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">margin:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>symmetric<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">vertical:</span> <span style="color:#0550ae">15</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">horizontal:</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">child:</span> Column<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">crossAxisAlignment:</span> CrossAxisAlignment<span style="color:#1f2328">.</span>end<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>                Text<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  message<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">style:</span> <span style="color:#cf222e">const</span> TextStyle<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>white<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">textAlign:</span> TextAlign<span style="color:#1f2328">.</span>end<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">]),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>Second, let&rsquo;s create the GPT&rsquo;s bubble (under <em>lib/widgets/gpt_bubble.dart</em>) for displaying all GPT&rsquo;s responses:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:flutter/material.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">GptBubble</span> <span style="color:#cf222e">extends</span> StatelessWidget <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">const</span> GptBubble<span style="color:#1f2328">(</span><span style="color:#cf222e">this</span><span style="color:#1f2328">.</span>message<span style="color:#1f2328">,</span> <span style="color:#1f2328">{</span><span style="color:#cf222e">super</span><span style="color:#1f2328">.</span>key<span style="color:#1f2328">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">final</span> <span style="color:#cf222e">String</span> message<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f6f8fa;background-color:#82071e">@</span>override
</span></span><span style="display:flex;"><span>  Widget build<span style="color:#1f2328">(</span>BuildContext context<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> Stack<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>        Row<span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">mainAxisAlignment:</span> MainAxisAlignment<span style="color:#1f2328">.</span>start<span style="color:#1f2328">,</span> <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>          Container<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">decoration:</span> BoxDecoration<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">color:</span> Theme<span style="color:#1f2328">.</span>of<span style="color:#1f2328">(</span>context<span style="color:#1f2328">).</span>colorScheme<span style="color:#1f2328">.</span>secondary<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">borderRadius:</span> <span style="color:#cf222e">const</span> BorderRadius<span style="color:#1f2328">.</span>only<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">topLeft:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">topRight:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">bottomLeft:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">0</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">bottomRight:</span> Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">width:</span> <span style="color:#0550ae">200</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">padding:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>symmetric<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">vertical:</span> <span style="color:#0550ae">10</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">horizontal:</span> <span style="color:#0550ae">16</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">margin:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>symmetric<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">vertical:</span> <span style="color:#0550ae">15</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">horizontal:</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">child:</span> Column<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">crossAxisAlignment:</span> CrossAxisAlignment<span style="color:#1f2328">.</span>start<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>                Text<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  message<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">style:</span> <span style="color:#cf222e">const</span> TextStyle<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>white<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">textAlign:</span> TextAlign<span style="color:#1f2328">.</span>start<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">]),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>Third, I created the user&rsquo;s input (under <em>lib/widgets/user_input.dart</em>) and with the GPT image downloaded from 






  <a href="https://icons8.com/icons/set/chatgpt" target="_blank" rel="noopener noreferrer" >here</a>
 and pasted under <em>assets/images</em> (which does not exists during flutter project creation) folder:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:flutter/material.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:provider/provider.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;../models/chat_model.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">UserInput</span> <span style="color:#cf222e">extends</span> StatelessWidget <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">final</span> TextEditingController chatcontroller<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">const</span> UserInput<span style="color:#1f2328">({</span>
</span></span><span style="display:flex;"><span>    Key<span style="color:#0550ae">?</span> key<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">required</span> <span style="color:#cf222e">this</span><span style="color:#1f2328">.</span>chatcontroller<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">})</span> <span style="color:#0550ae">:</span> <span style="color:#cf222e">super</span><span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">key:</span> key<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f6f8fa;background-color:#82071e">@</span>override
</span></span><span style="display:flex;"><span>  Widget build<span style="color:#1f2328">(</span>BuildContext context<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> Align<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">alignment:</span> Alignment<span style="color:#1f2328">.</span>bottomCenter<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">child:</span> Container<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">padding:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>only<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">top:</span> <span style="color:#0550ae">10</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">bottom:</span> <span style="color:#0550ae">10</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">left:</span> <span style="color:#0550ae">5</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">right:</span> <span style="color:#0550ae">5</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">decoration:</span> <span style="color:#cf222e">const</span> BoxDecoration<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>green<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">border:</span> Border<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#900;font-weight:bold">top:</span> BorderSide<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>greenAccent<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">width:</span> <span style="color:#0550ae">0.5</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">child:</span> Row<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>            Expanded<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">flex:</span> <span style="color:#0550ae">1</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">child:</span> Image<span style="color:#1f2328">.</span>asset<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#0a3069">&#34;assets/images/icons8-chatgpt-96.png&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">height:</span> <span style="color:#0550ae">40</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            Expanded<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">flex:</span> <span style="color:#0550ae">5</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">child:</span> TextFormField<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">onFieldSubmitted:</span> <span style="color:#1f2328">(</span>e<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                  context<span style="color:#1f2328">.</span>read<span style="color:#0550ae">&lt;</span>ChatModel<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">().</span>sendChat<span style="color:#1f2328">(</span>e<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>                  chatcontroller<span style="color:#1f2328">.</span>clear<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">},</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">controller:</span> chatcontroller<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">style:</span> <span style="color:#cf222e">const</span> TextStyle<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>white<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">decoration:</span> <span style="color:#cf222e">const</span> InputDecoration<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">focusColor:</span> Colors<span style="color:#1f2328">.</span>white<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">filled:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">fillColor:</span> Colors<span style="color:#1f2328">.</span>black54<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">suffixIcon:</span> Icon<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    Icons<span style="color:#1f2328">.</span>send<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>white<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">focusedBorder:</span> OutlineInputBorder<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">borderSide:</span> BorderSide<span style="color:#1f2328">.</span>none<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">borderRadius:</span> BorderRadius<span style="color:#1f2328">.</span>all<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                      Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">5.0</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">border:</span> OutlineInputBorder<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">borderRadius:</span> BorderRadius<span style="color:#1f2328">.</span>all<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                      Radius<span style="color:#1f2328">.</span>circular<span style="color:#1f2328">(</span><span style="color:#0550ae">5.0</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>Next, remember to register the image in the pubspec.yaml before you can use it:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#0550ae">flutter</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">uses-material-design</span><span style="color:#1f2328">:</span><span style="color:#fff"> </span><span style="color:#cf222e">true</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">  </span><span style="color:#0550ae">assets</span><span style="color:#1f2328">:</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">     </span>- assets/images/icons8-chatgpt-96.png</span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>Last, let&rsquo;s create the model (under <em>lib/models/chat_model.dart</em>) as shown here. Since need some way to provide change notification API, ChatModel is extended from 






  <a href="https://api.flutter.dev/flutter/foundation/ChangeNotifier-class.html" target="_blank" rel="noopener noreferrer" >ChangeNotifier</a>
. Whenever there are new messages coming in, after the changes are made, <em>notifyListeners()</em> is called:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:flutter/material.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;../apis/openai_api.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;../widgets/user_bubble.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;../widgets/gpt_bubble.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">ChatModel</span> <span style="color:#cf222e">extends</span> ChangeNotifier <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">final</span> List<span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span> _messages <span style="color:#0550ae">=</span> <span style="color:#1f2328">[];</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  List<span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span> <span style="color:#cf222e">get</span> getMessages <span style="color:#0550ae">=&gt;</span> _messages<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Future<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">void</span><span style="color:#0550ae">&gt;</span> sendChat<span style="color:#1f2328">(</span><span style="color:#cf222e">String</span> txt<span style="color:#1f2328">)</span> <span style="color:#cf222e">async</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    addUserMessage<span style="color:#1f2328">(</span>txt<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">var</span> response <span style="color:#0550ae">=</span> <span style="color:#cf222e">await</span> OpenAiRepository<span style="color:#1f2328">.</span>getOpenAIChatCompletion<span style="color:#1f2328">(</span>txt<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#57606a">//remove the last item
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>    _messages<span style="color:#1f2328">.</span>removeLast<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span><span style="color:#0550ae">!</span>response<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;hasError&#39;</span><span style="color:#1f2328">])</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      _messages<span style="color:#1f2328">.</span>add<span style="color:#1f2328">(</span>GptBubble<span style="color:#1f2328">(</span>response<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;text&#39;</span><span style="color:#1f2328">]));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      _messages<span style="color:#1f2328">.</span>add<span style="color:#1f2328">(</span>GptBubble<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;ERROR: </span><span style="color:#0a3069">${</span>response<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;text&#39;</span><span style="color:#1f2328">]</span><span style="color:#0a3069">}</span><span style="color:#0a3069">&#34;</span><span style="color:#1f2328">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    notifyListeners<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">void</span> addUserMessage<span style="color:#1f2328">(</span>txt<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    _messages<span style="color:#1f2328">.</span>add<span style="color:#1f2328">(</span>UserBubble<span style="color:#1f2328">(</span>txt<span style="color:#1f2328">));</span>
</span></span><span style="display:flex;"><span>    _messages<span style="color:#1f2328">.</span>add<span style="color:#1f2328">(</span><span style="color:#cf222e">const</span> GptBubble<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;...&#34;</span><span style="color:#1f2328">));</span>
</span></span><span style="display:flex;"><span>    notifyListeners<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><h2 id="consuming-the-apis">Consuming the APIs</h2>
<p><em>(2 mins)</em></p>
<p>I created a GPT constant file (under <em>lib/constants/gpt_constant.dart</em>) to hold all constants:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">const</span> openaiKey <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#39;sk-***YLT2&#39;</span><span style="color:#1f2328">;</span> <span style="color:#57606a">// you may enter your own OpenAI&#39;s API token key here
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">//https://platform.openai.com/docs/guides/chat/chat-completions-beta
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">const</span> openaiChatCompletionEndpoint <span style="color:#0550ae">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0a3069">&#39;https://api.openai.com/v1/chat/completions&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#57606a">//https://platform.openai.com/docs/api-reference/completions/create
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">const</span> openaiCompletionEndpoint <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#39;https://api.openai.com/v1/completions&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">const</span> openaiChatRole <span style="color:#0550ae">=</span> <span style="color:#0a3069">&#39;user&#39;</span><span style="color:#1f2328">;</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>Next, I created 2 futures with asyn keyword on <strong>getOpenAIChatCompletion()</strong> for conversing with the later models, while the other future, <strong>getOpenAICompletion()</strong> is meant for conversing with the older <em>text-davinci-003</em> model. You may check out 






  <a href="https://platform.openai.com/docs/models" target="_blank" rel="noopener noreferrer" >models</a>
 for the latest avaiable ones:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;dart:convert&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:http/http.dart&#39;</span> <span style="color:#cf222e">as</span> http<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;../constants/gpt_constant.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">OpenAiRepository</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">static</span> <span style="color:#cf222e">var</span> client <span style="color:#0550ae">=</span> http<span style="color:#1f2328">.</span>Client<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">static</span> Future<span style="color:#0550ae">&lt;</span>Map<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">String</span><span style="color:#1f2328">,</span> <span style="color:#cf222e">dynamic</span><span style="color:#0550ae">&gt;&gt;</span> getOpenAIChatCompletion<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">String</span> prompt<span style="color:#1f2328">)</span> <span style="color:#cf222e">async</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">final</span> response <span style="color:#0550ae">=</span> <span style="color:#cf222e">await</span> http<span style="color:#1f2328">.</span>post<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      Uri<span style="color:#1f2328">.</span>parse<span style="color:#1f2328">(</span>openaiChatCompletionEndpoint<span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">headers:</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;Content-Type&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#34;application/json&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;Authorization&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#34;Bearer </span><span style="color:#0a3069">$</span>openaiKey<span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">},</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">body:</span> jsonEncode<span style="color:#1f2328">({</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;model&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#34;gpt-3.5-turbo&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;messages&#34;</span><span style="color:#0550ae">:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">{</span><span style="color:#0a3069">&#34;role&#34;</span><span style="color:#0550ae">:</span> openaiChatRole<span style="color:#1f2328">,</span> <span style="color:#0a3069">&#34;content&#34;</span><span style="color:#0550ae">:</span> prompt<span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">]</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">}),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>response<span style="color:#1f2328">.</span>statusCode <span style="color:#0550ae">==</span> <span style="color:#0550ae">200</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">try</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">final</span> responseBody <span style="color:#0550ae">=</span> jsonDecode<span style="color:#1f2328">(</span>response<span style="color:#1f2328">.</span>body<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">dynamic</span><span style="color:#0550ae">&gt;</span> choices <span style="color:#0550ae">=</span> responseBody<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;choices&#39;</span><span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>choices<span style="color:#1f2328">.</span>isNotEmpty<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#57606a">// Extract the first choice from the choices array
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>          <span style="color:#cf222e">dynamic</span> firstChoice <span style="color:#0550ae">=</span> choices<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          <span style="color:#57606a">// Check if the first choice has a message field
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>          <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>firstChoice<span style="color:#1f2328">.</span>containsKey<span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;message&#39;</span><span style="color:#1f2328">))</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// Extract the message field from the first choice
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">false</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> firstChoice<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;message&#39;</span><span style="color:#1f2328">][</span><span style="color:#0a3069">&#39;content&#39;</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// Handle the case where the first choice does not have a message field
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;No message generated, please try again&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#57606a">// Handle the case where the choices array is empty
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>          <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;No choices generated, please try again&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">}</span> <span style="color:#cf222e">catch</span> <span style="color:#1f2328">(</span>e<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;Failed to decode OpenAI response: </span><span style="color:#0a3069">$</span>e<span style="color:#0a3069">&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>response<span style="color:#1f2328">.</span>statusCode <span style="color:#0550ae">&gt;=</span> <span style="color:#0550ae">400</span> <span style="color:#0550ae">&amp;&amp;</span> response<span style="color:#1f2328">.</span>statusCode <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">500</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;OpenAI API error: </span><span style="color:#0a3069">${</span>response<span style="color:#1f2328">.</span>statusCode<span style="color:#0a3069">}</span><span style="color:#0a3069">&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0a3069">&#39;Failed to get OpenAI completion. Error code: </span><span style="color:#0a3069">${</span>response<span style="color:#1f2328">.</span>statusCode<span style="color:#0a3069">}</span><span style="color:#0a3069">&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">static</span> Future<span style="color:#0550ae">&lt;</span>Map<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">String</span><span style="color:#1f2328">,</span> <span style="color:#cf222e">dynamic</span><span style="color:#0550ae">&gt;&gt;</span> getOpenAICompletion<span style="color:#1f2328">(</span><span style="color:#cf222e">String</span> prompt<span style="color:#1f2328">)</span> <span style="color:#cf222e">async</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">final</span> response <span style="color:#0550ae">=</span> <span style="color:#cf222e">await</span> http<span style="color:#1f2328">.</span>post<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      Uri<span style="color:#1f2328">.</span>parse<span style="color:#1f2328">(</span>openaiCompletionEndpoint<span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">headers:</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;Content-Type&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#34;application/json&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;Authorization&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#34;Bearer </span><span style="color:#0a3069">$</span>openaiKey<span style="color:#0a3069">&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">},</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">body:</span> jsonEncode<span style="color:#1f2328">({</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;model&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#34;text-davinci-003&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;prompt&#34;</span><span style="color:#0550ae">:</span> prompt<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;max_tokens&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0550ae">150</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;temperature&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0550ae">0.2</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;top_p&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0550ae">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">}),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>response<span style="color:#1f2328">.</span>statusCode <span style="color:#0550ae">==</span> <span style="color:#0550ae">200</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">try</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">final</span> responseBody <span style="color:#0550ae">=</span> jsonDecode<span style="color:#1f2328">(</span>response<span style="color:#1f2328">.</span>body<span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>        List<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">dynamic</span><span style="color:#0550ae">&gt;</span> choices <span style="color:#0550ae">=</span> responseBody<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;choices&#39;</span><span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>choices<span style="color:#1f2328">.</span>isNotEmpty<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#57606a">// Extract the first choice from the choices array
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>          <span style="color:#cf222e">dynamic</span> firstChoice <span style="color:#0550ae">=</span> choices<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">];</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          <span style="color:#57606a">// Check if the first choice has a text field
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>          <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>firstChoice<span style="color:#1f2328">.</span>containsKey<span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;text&#39;</span><span style="color:#1f2328">))</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// Extract the text field from the first choice
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">false</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> firstChoice<span style="color:#1f2328">[</span><span style="color:#0a3069">&#39;text&#39;</span><span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#57606a">// Handle the case where the first choice does not have a text field
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>            <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;No text generated, please try again&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#57606a">// Handle the case where the choices array is empty
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span>          <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;No choices generated, please try again&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">}</span> <span style="color:#cf222e">catch</span> <span style="color:#1f2328">(</span>e<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>          <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;Failed to decode OpenAI response: </span><span style="color:#0a3069">$</span>e<span style="color:#0a3069">&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>response<span style="color:#1f2328">.</span>statusCode <span style="color:#0550ae">&gt;=</span> <span style="color:#0550ae">400</span> <span style="color:#0550ae">&amp;&amp;</span> response<span style="color:#1f2328">.</span>statusCode <span style="color:#0550ae">&lt;</span> <span style="color:#0550ae">500</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span> <span style="color:#0a3069">&#39;OpenAI API error: </span><span style="color:#0a3069">${</span>response<span style="color:#1f2328">.</span>statusCode<span style="color:#0a3069">}</span><span style="color:#0a3069">&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span> <span style="color:#cf222e">else</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#cf222e">return</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;hasError&#34;</span><span style="color:#0550ae">:</span> <span style="color:#cf222e">true</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#0a3069">&#34;text&#34;</span><span style="color:#0550ae">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#0a3069">&#39;Failed to get OpenAI completion. Error code: </span><span style="color:#0a3069">${</span>response<span style="color:#1f2328">.</span>statusCode<span style="color:#0a3069">}</span><span style="color:#0a3069">&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>Finally, let&rsquo;s re-visit <em>main.dart</em> and replace the previous placeholders. Here I used 






  <a href="https://pub.dev/documentation/provider/latest/provider/MultiProvider-class.html" target="_blank" rel="noopener noreferrer" >MultiProvider</a>
 so as to reduce boilerplate code of nesting multiple providers (for future use cases):</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:flutter/material.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;package:provider/provider.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;./models/chat_model.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">import</span> <span style="color:#0a3069">&#39;../widgets/user_input.dart&#39;</span><span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">void</span> main<span style="color:#1f2328">()</span> <span style="color:#0550ae">=&gt;</span> runApp<span style="color:#1f2328">(</span><span style="color:#cf222e">const</span> MyApp<span style="color:#1f2328">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#cf222e">class</span> <span style="color:#1f2328">MyApp</span> <span style="color:#cf222e">extends</span> StatelessWidget <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#cf222e">const</span> MyApp<span style="color:#1f2328">({</span><span style="color:#cf222e">super</span><span style="color:#1f2328">.</span>key<span style="color:#1f2328">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f6f8fa;background-color:#82071e">@</span>override
</span></span><span style="display:flex;"><span>  Widget build<span style="color:#1f2328">(</span>BuildContext context<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">final</span> chatcontroller <span style="color:#0550ae">=</span> TextEditingController<span style="color:#1f2328">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#cf222e">return</span> MaterialApp<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">title:</span> <span style="color:#0a3069">&#34;OpenAI Chat&#34;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">theme:</span> ThemeData<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">primarySwatch:</span> Colors<span style="color:#1f2328">.</span>green<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#900;font-weight:bold">home:</span> Scaffold<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">appBar:</span> AppBar<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">title:</span> <span style="color:#cf222e">const</span> Text<span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;FlutterChat&#39;</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">actions:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>            DropdownButton<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">underline:</span> Container<span style="color:#1f2328">(),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">icon:</span> Icon<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                Icons<span style="color:#1f2328">.</span>more_vert<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#900;font-weight:bold">color:</span> Theme<span style="color:#1f2328">.</span>of<span style="color:#1f2328">(</span>context<span style="color:#1f2328">).</span>primaryIconTheme<span style="color:#1f2328">.</span>color<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">items:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>                DropdownMenuItem<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">value:</span> <span style="color:#0a3069">&#39;logout&#39;</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">child:</span> Row<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">children:</span> <span style="color:#cf222e">const</span> <span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>                      Icon<span style="color:#1f2328">(</span>Icons<span style="color:#1f2328">.</span>exit_to_app<span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                      SizedBox<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#900;font-weight:bold">width:</span> <span style="color:#0550ae">8</span><span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                      Text<span style="color:#1f2328">(</span><span style="color:#0a3069">&#39;Logout&#39;</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">onChanged:</span> <span style="color:#1f2328">(</span>itemIdentifier<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#cf222e">if</span> <span style="color:#1f2328">(</span>itemIdentifier <span style="color:#0550ae">==</span> <span style="color:#0a3069">&#39;logout&#39;</span><span style="color:#1f2328">)</span> <span style="color:#1f2328">{}</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#900;font-weight:bold">body:</span> MultiProvider<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">providers:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>            ChangeNotifierProvider<span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">create:</span> <span style="color:#1f2328">(</span>_<span style="color:#1f2328">)</span> <span style="color:#0550ae">=&gt;</span> ChatModel<span style="color:#1f2328">()),</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>          <span style="color:#900;font-weight:bold">child:</span> Consumer<span style="color:#0550ae">&lt;</span>ChatModel<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">builder:</span> <span style="color:#1f2328">(</span>_<span style="color:#1f2328">,</span> model<span style="color:#1f2328">,</span> child<span style="color:#1f2328">)</span> <span style="color:#1f2328">{</span>
</span></span><span style="display:flex;"><span>            List<span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span> messages <span style="color:#0550ae">=</span> model<span style="color:#1f2328">.</span>getMessages<span style="color:#1f2328">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#cf222e">return</span> Stack<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>              <span style="color:#900;font-weight:bold">children:</span> <span style="color:#0550ae">&lt;</span>Widget<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>                Container<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">color:</span> Colors<span style="color:#1f2328">.</span>black<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">margin:</span> <span style="color:#cf222e">const</span> EdgeInsets<span style="color:#1f2328">.</span>only<span style="color:#1f2328">(</span><span style="color:#900;font-weight:bold">bottom:</span> <span style="color:#0550ae">80</span><span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">child:</span> ListView<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#900;font-weight:bold">children:</span> <span style="color:#1f2328">[</span>
</span></span><span style="display:flex;"><span>                      <span style="color:#cf222e">for</span> <span style="color:#1f2328">(</span><span style="color:#cf222e">int</span> i <span style="color:#0550ae">=</span> <span style="color:#0550ae">0</span><span style="color:#1f2328">;</span> i <span style="color:#0550ae">&lt;</span> messages<span style="color:#1f2328">.</span>length<span style="color:#1f2328">;</span> i<span style="color:#0550ae">++</span><span style="color:#1f2328">)</span> messages<span style="color:#1f2328">[</span>i<span style="color:#1f2328">]</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>                UserInput<span style="color:#1f2328">(</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#900;font-weight:bold">chatcontroller:</span> chatcontroller<span style="color:#1f2328">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#1f2328">)</span>
</span></span><span style="display:flex;"><span>              <span style="color:#1f2328">],</span>
</span></span><span style="display:flex;"><span>            <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>          <span style="color:#1f2328">}),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>      <span style="color:#1f2328">),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#1f2328">);</span>
</span></span><span style="display:flex;"><span>  <span style="color:#1f2328">}</span>
</span></span><span style="display:flex;"><span><span style="color:#1f2328">}</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>And that&rsquo;s all to it! This is the sample output:</p>


































 
  
  





  <img src="/images/byogpt/flutter-byo-gpt-demo.png"   alt="flutter-byo-gpt-demo" class="sc-image sc-image-default"
       >


<p>For your reference, this is the 






  <a href="https://github.com/seehiong/project_byogpt/tree/master" target="_blank" rel="noopener noreferrer" >BYO-GPT</a>
 repo.</p>
<h2 id="swapping-models-optional">Swapping models (optional)</h2>
<p>You may try to change line 15 of <em>chat_model.dart</em> to <strong>getOpenAICompletion()</strong> for conversing with the other model:</p>






<div class="code-block-wrapper">
  <div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dart" data-lang="dart"><span style="display:flex;"><span><span style="color:#cf222e">var</span> response <span style="color:#0550ae">=</span> <span style="color:#cf222e">await</span> OpenAiRepository<span style="color:#1f2328">.</span>getOpenAICompletion<span style="color:#1f2328">(</span>txt<span style="color:#1f2328">);</span></span></span></code></pre></div>
  <button class="copy-code-button" aria-label="Copy code to clipboard" title="Copy code">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="copy-icon">
      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
    </svg>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="check-icon" style="display:none;">
      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
    </svg>
    <span class="copy-text">Copy</span>
  </button>
</div><p>However, usually a simple Hi to this older model gives weird response as this!</p>


































 
  
  





  <img src="/images/byogpt/flutter-weird-response.png"   alt="flutter-weird-response" class="sc-image sc-image-default"
       >



    </section>

    <nav class="post-navigation">
      <div class="nav-links">
        
        
          <div class="nav-next">
            <a href="/posts/2023/04/running-llama-model-locally/" rel="next">
              <span class="meta-nav">Next →</span>
              <span class="post-title">Running LLaMA model locally</span>
            </a>
          </div>
        
      </div>
    </nav>

    
<div class="giscus-comments-container">
</div>

<script>
  (function() {
    'use strict';

    const getGiscusTheme = () => {
      const storedTheme = localStorage.getItem('theme'); 
      if (storedTheme) {
        return storedTheme === 'dark-mode' ? 'dark' : 'light';
      }
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };

    const setGiscusFrameTheme = (theme) => {
      const iframe = document.querySelector('iframe.giscus-frame');
      if (iframe && iframe.contentWindow) {
        iframe.contentWindow.postMessage({ giscus: { setConfig: { theme: theme } } }, 'https://giscus.app');
      }
    };

    const loadGiscus = () => {
      const giscusContainer = document.querySelector('.giscus-comments-container');
      if (!giscusContainer) {
        console.warn('Giscus container not found.');
        return;
      }

      while (giscusContainer.firstChild) {
        giscusContainer.removeChild(giscusContainer.firstChild);
      }

      const giscusScript = document.createElement('script');
      const giscusAttributes = {
        "src": "https://giscus.app/client.js",
        "data-repo":             "seehiong\/seehiong.github.io",
        "data-repo-id":          "R_kgDOJg7Puw",
        "data-category":         "General",
        "data-category-id":      "DIC_kwDOJg7Pu84Cbyhc",
        "data-mapping":          "url", 
        "data-strict":           "0",
        "data-reactions-enabled":"1",
        "data-emit-metadata":    "0",
        "data-input-position":   "top", 
        "data-theme":            getGiscusTheme(), 
        "data-lang":             "en",
        "data-loading":          "lazy",
        "crossorigin":           "anonymous",
        "async":                 "true", 
      };

      if (!giscusAttributes["data-repo"] || !giscusAttributes["data-repo-id"] || !giscusAttributes["data-category-id"]) {
          console.error("Giscus parameters (giscusRepo, giscusRepoId, giscusCategoryId) are not configured in hugo.toml.");
          giscusContainer.innerHTML = "<p style='color: var(--text-secondary);'>Giscus comments are not configured correctly. Please check site parameters.</p>";
          return;
      }

      Object.entries(giscusAttributes).forEach(
        ([key, value]) => giscusScript.setAttribute(key, value)
      );
      giscusContainer.appendChild(giscusScript);
    };

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadGiscus);
    } else {
        loadGiscus();
    }

    const htmlElement = document.documentElement;
    const observer = new MutationObserver((mutationsList) => {
      for (const mutation of mutationsList) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          setGiscusFrameTheme(getGiscusTheme());
        }
      }
    });
    observer.observe(htmlElement, { attributes: true });

  })();
</script>


  </article>
</div>
</main>
    </div>

    
    <div id="search-modal-overlay" class="search-modal-overlay" style="display: none;">
      <div id="search-modal-content" class="search-modal-content">
        <button id="search-modal-close" class="search-modal-close" aria-label="Close search" title="Close search">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
        <input type="search" id="modal-search-input" class="modal-search-input" placeholder="Search content..." aria-label="Search input">
        <div id="modal-search-results" class="modal-search-results">
        </div>
      </div>
    </div>
    

  <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js" defer></script>
  <script>
    (function() {
      'use strict';

      window.addEventListener('DOMContentLoaded', () => {
        const searchModalOverlay = document.getElementById('search-modal-overlay');
        const searchModalContent = document.getElementById('search-modal-content');
        const searchModalCloseButton = document.getElementById('search-modal-close');
        const searchToggleButton = document.getElementById('nav-search-toggle');
        const searchInputTarget = document.getElementById('modal-search-input');
        const searchResultsTarget = document.getElementById('modal-search-results');

        let fuseInstance = null;
        let searchData = [];

        const loadSearchData = async () => {
          if (searchData.length === 0 && !fuseInstance) {
            try {
              const response = await fetch('\/index.json');
              if (!response.ok) {
                throw new Error(`HTTP error loading index.json! status: ${response.status}`);
              }
              searchData = await response.json();
              initializeFuse();
            } catch (e) {
              console.error("[SearchSetup] Error loading search data:", e);
              if (searchResultsTarget) searchResultsTarget.innerHTML = "<p>Error loading search index.</p>";
            }
          } else if (searchData.length > 0 && !fuseInstance){
            initializeFuse();
          }
        };

        const initializeFuse = () => {
          if (searchData.length > 0 && !fuseInstance) {
            const options = {
              keys: [
                { name: 'title', weight: 0.7 }, { name: 'summary', weight: 0.5 },
                { name: 'content', weight: 0.3 }, { name: 'tags', weight: 0.4 }
              ],
              includeScore: true, threshold: 0.4, minMatchCharLength: 2,
            };
            fuseInstance = new Fuse(searchData, options);
          }
        };

        const performSearch = () => {
          if (!fuseInstance || !searchInputTarget || !searchResultsTarget) return;
          const query = searchInputTarget.value.trim();
          searchResultsTarget.innerHTML = '';
          if (query.length < 2) return;

          const results = fuseInstance.search(query);
          if (results.length > 0) {
            const ul = document.createElement('ul');
            ul.className = 'search-results-list';
            results.slice(0, 10).forEach(result => {
              const item = result.item;
              const li = document.createElement('li');
              li.className = 'search-result-item';
              const a = document.createElement('a');
              a.href = item.permalink;
              a.textContent = item.title;
              li.appendChild(a);
              ul.appendChild(li);
            });
            searchResultsTarget.appendChild(ul);
          } else {
            searchResultsTarget.innerHTML = '<p>No results found.</p>';
          }
        };

        const openSearchModal = async () => {
          await loadSearchData();
          if (searchInputTarget) searchInputTarget.value = '';
          if (searchResultsTarget) searchResultsTarget.innerHTML = '';

          if (searchModalOverlay) {
            searchModalOverlay.style.display = 'flex';
            setTimeout(() => searchModalOverlay.classList.add('active'), 10);
          } else { return; }

          if (searchInputTarget) setTimeout(() => searchInputTarget.focus(), 50);
          if (searchToggleButton) searchToggleButton.classList.add('active');
        };

        const closeSearchModal = () => {
          if (searchModalOverlay) {
            searchModalOverlay.classList.remove('active');
            setTimeout(() => searchModalOverlay.style.display = 'none', 300);
          }
          if (searchToggleButton) searchToggleButton.classList.remove('active');
        };

        if (searchToggleButton) {
          searchToggleButton.addEventListener('click', (e) => {
            e.stopPropagation();
            if (searchModalOverlay && searchModalOverlay.classList.contains('active')) {
              closeSearchModal();
            } else {
              openSearchModal();
            }
          });
        } else { console.error("[SearchSetup] #nav-search-toggle button not found."); }

        if (searchModalCloseButton) { searchModalCloseButton.addEventListener('click', closeSearchModal); }
        if (searchModalOverlay && searchModalContent) {
          searchModalOverlay.addEventListener('click', (event) => {
            if (event.target === searchModalOverlay) closeSearchModal();
          });
        }
        document.addEventListener('keydown', (event) => {
          if (event.key === 'Escape' && searchModalOverlay && searchModalOverlay.classList.contains('active')) {
            closeSearchModal();
          }
        });
        if (searchInputTarget) {
          let debounceTimer;
          searchInputTarget.addEventListener('input', () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(performSearch, 300);
          });
        }
      });
    })();
  </script>

    

    

  <script>
    MathJax = {
      tex: {
        displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        inlineMath: [['\\(', '\\)']], 
        processEscapes: true,
        processEnvironments: true,
        tags: 'ams' 
      },
      svg: {
        fontCache: 'global' 
      },
      chtml: {
        fontURL: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2'
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'], 
        ignoreHtmlClass: 'tex2jax_ignore', 
        processHtmlClass: 'tex2jax_process'
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<footer class="footer-main simplified-footer">
  <div class="content-body footer-wraper">
    <div class="footer-box">
      <div class="footer-content">
        <div class="copyright-line">
          Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> © 2025 See Hiong. All rights reserved.
        </div>
        <div class="social-links">
          
            <a href="https://github.com/seehiong" target="_blank" title="GitHub" class="social-link" aria-label="GitHub">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            </a>
          
          
            <a href="https://www.linkedin.com/in/seehiong/" target="_blank" title="LinkedIn" class="social-link" aria-label="LinkedIn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
            </a>
          
          
            <a href="/index.xml" target="_blank" title="RSS" class="social-link" aria-label="RSS Feed">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/></svg>
            </a>
          
        </div>
      </div>
    </div>
  </div>
</footer>
        <script src="/js/animation.js" defer></script>
    
        <script src="/js/code-copy.js" defer></script>
    
        <script src="/js/scroll-header.js" defer></script>
       
  </body>
</html>