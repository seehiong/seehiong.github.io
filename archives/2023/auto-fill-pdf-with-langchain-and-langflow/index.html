<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    




    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.b989f0fdae3971a3effd81d6d0b27b3cb1023ff0b601ff43e2118b0d9d82ddb9.js"></script>





  
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-5PNPM4HWQ0"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-5PNPM4HWQ0');
        }
      </script>

    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  


<!-- Open Graph image and Twitter Card metadata -->

<title itemprop="name">Tech Blog - Autofill PDF with LangChain and LangFlow</title>
<meta property="og:title" content=Tech&#32;Blog&#32;-&#32;Autofill&#32;PDF&#32;with&#32;LangChain&#32;and&#32;LangFlow />
<meta name="twitter:title" content=Tech&#32;Blog&#32;-&#32;Autofill&#32;PDF&#32;with&#32;LangChain&#32;and&#32;LangFlow />
<meta itemprop="name" content=Tech&#32;Blog&#32;-&#32;Autofill&#32;PDF&#32;with&#32;LangChain&#32;and&#32;LangFlow />
<meta name="application-name" content=Tech&#32;Blog&#32;-&#32;Autofill&#32;PDF&#32;with&#32;LangChain&#32;and&#32;LangFlow />
<meta property="og:site_name" content="See Hiong&#39;s Blog" />


<meta name="description" content="In this journey, I explore automating PDF autofill using LangChain and LangFlow. Leveraging LangFlow and OpenAI, I streamline the employment form completion process, demonstrating steps to install LangFlow and set up a PostgreSQL table. Despite encountering challenges in prototyping with LangFlow, the exploration progresses to auto-fill PDFs. After extracting form fields and LLaMA model setup, I employ LangChain to fetch PostgreSQL data. Concluding with Python manipulation to interpolate and update the PDF, the process achieves seamless auto-fill. Dive into the details, overcome challenges, and witness the power of LangChain and LangFlow in revolutionizing PDF automation." />
<meta itemprop="description" content="In this journey, I explore automating PDF autofill using LangChain and LangFlow. Leveraging LangFlow and OpenAI, I streamline the employment form completion process, demonstrating steps to install LangFlow and set up a PostgreSQL table. Despite encountering challenges in prototyping with LangFlow, the exploration progresses to auto-fill PDFs. After extracting form fields and LLaMA model setup, I employ LangChain to fetch PostgreSQL data. Concluding with Python manipulation to interpolate and update the PDF, the process achieves seamless auto-fill. Dive into the details, overcome challenges, and witness the power of LangChain and LangFlow in revolutionizing PDF automation." />
<meta property="og:description" content="In this journey, I explore automating PDF autofill using LangChain and LangFlow. Leveraging LangFlow and OpenAI, I streamline the employment form completion process, demonstrating steps to install LangFlow and set up a PostgreSQL table. Despite encountering challenges in prototyping with LangFlow, the exploration progresses to auto-fill PDFs. After extracting form fields and LLaMA model setup, I employ LangChain to fetch PostgreSQL data. Concluding with Python manipulation to interpolate and update the PDF, the process achieves seamless auto-fill. Dive into the details, overcome challenges, and witness the power of LangChain and LangFlow in revolutionizing PDF automation." />
<meta name="twitter:description" content="In this journey, I explore automating PDF autofill using LangChain and LangFlow. Leveraging LangFlow and OpenAI, I streamline the employment form completion process, demonstrating steps to install LangFlow and set up a PostgreSQL table. Despite encountering challenges in prototyping with LangFlow, the exploration progresses to auto-fill PDFs. After extracting form fields and LLaMA model setup, I employ LangChain to fetch PostgreSQL data. Concluding with Python manipulation to interpolate and update the PDF, the process achieves seamless auto-fill. Dive into the details, overcome challenges, and witness the power of LangChain and LangFlow in revolutionizing PDF automation." />


<base href="https://seehiong.github.io/archives/2023/auto-fill-pdf-with-langchain-and-langflow/" />
<link rel="canonical" href="https://seehiong.github.io/archives/2023/auto-fill-pdf-with-langchain-and-langflow/" itemprop="url" />
<meta name="url" content="https://seehiong.github.io/archives/2023/auto-fill-pdf-with-langchain-and-langflow/" />
<meta name="twitter:url" content="https://seehiong.github.io/archives/2023/auto-fill-pdf-with-langchain-and-langflow/" />
<meta property="og:url" content="https://seehiong.github.io/archives/2023/auto-fill-pdf-with-langchain-and-langflow/" />


<meta property="og:updated_time" content="2023-05-26T20:00:00&#43;08:00" />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://seehiong.github.io/sitemap.xml' />

<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />



<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="See Hiong&#39;s Blog" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.134.1">


    
    

<link type="text/css" rel="stylesheet" href="/css/bundle.min.03b57bbaf31d739f14c95df7f05d1cefcfa60bbafa36ba47313afdeb325aeada.css">


    
    <style>
    body {
        --sidebar-bg-color: #202020;
        --sidebar-img-border-color: #515151;
        --sidebar-p-color: #909090;
        --sidebar-h1-color: #FFF;
        --sidebar-a-color: #FFF;
        --sidebar-socials-color: #FFF;
        --text-color: #222;
        --bkg-color: #FAF9F6;
        --post-title-color: #303030;
        --list-color: #5a5a5a;
        --link-color: #268bd2;
        --date-color: #515151;
        --table-border-color: #E5E5E5;
        --table-stripe-color: #F9F9F9;
        --code-color: #000;
        --code-background-color: #E5E5E5;
        --code-block-color: #fff;
        --code-block-background-color: #272822;
        --moon-sun-color: #FFF;
        --moon-sun-background-color: #515151;
    }
    body.dark-theme {
        --text-color: #eee;
        --bkg-color: #121212;
        --post-title-color: #DBE2E9;
        --list-color: #9d9d9d;
        --link-color: #268bd2;
        --date-color: #9a9a9a;
        --table-border-color: #515151;
        --table-stripe-color: #202020;
        --code-color: #fff;
        --code-background-color: #515151;
        --code-block-color: #fff;
        --code-block-background-color: #272822;
    }
    body {
        background-color: var(--bkg-color);
    }
</style>

</head>

    <body class="dark-theme">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://seehiong.github.io/">
                <h1>Tech Blog</h1>
            </a>
        
    </h1>
    <p class="lead">
    Chronicling my personal expedition of technology exploration and experimentation, facilitated by a home-based self-configured laboratory
    </p>
</div>

        <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<style>
    :root {
        --pagefind-ui-primary: #eeeeee;
        --pagefind-ui-text: #eeeeee;
        --pagefind-ui-background: #152028;
        --pagefind-ui-border: #152028;
        --pagefind-ui-tag: #152028;
    }
</style>
<script src="/pagefind/pagefind-ui.js"></script>
<div style="max-width: 100%; margin: clamp(2px, 1vw, 10px) auto;">
    <div id="search"></div>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            new PagefindUI({ element: "#search", showSubResults: true, showImages: false });
        });
    </script>
</div>
        <nav>
    <ul class="sidebar-nav">

        
        
        
        
            

            
                
                
                    <li class="heading">
                        <a href="/2024/">2024</a>
                    </li>
                    
                        <li class="sub-heading">
                            Recent
                        </li>
                        
                            <li class="bullet">
                                <a href="https://seehiong.github.io/2024/gpt-2-training-guide/">GPT-2 Training Guide</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://seehiong.github.io/2024/gpt-2-setup-and-pretraining-guide/">GPT-2 Setup and Pretraining Guide</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://seehiong.github.io/2024/integrating-mlflow-and-kubeflow-on-talos/">Integrating MLflow and Kubeflow on Talos</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://seehiong.github.io/2024/deploy-microservices-with-talos-locally/">Deploy Microservices with Talos Locally</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://seehiong.github.io/2024/controlling-roarm-m2-s-with-ros2/">Controlling RoArm-M2-S with ROS2</a>
                            </li>
                        
                            <li class="bullet">
                                <a href="https://seehiong.github.io/2024/wave-rover-with-raspberry-pi-4/">Wave Rover with Raspberry Pi 4</a>
                            </li>
                        
                    
                
            
                
                
            
                
                
            
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        
        
            

            
                
                
            
                
                
            
                
                
                    <li class="heading">
                        <a href="/archives/">Archives</a>
                    </li>
                    
                
            
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        
        
            

            
                
                
            
                
                
                    <li class="heading">
                        <a href="/about/">About</a>
                    </li>
                    
                
            
                
                
            
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
                
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
                        
                
            
        

    </ul>
</nav>

        
    <a target="_blank" class="social" title="GitHub" href="https://github.com/seehiong">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24">
            <path fill="currentColor" d="M18.88 1.099C18.147.366 17.265 0 16.233 0H3.746C2.714 0 1.832.366 1.099 1.099C.366 1.832 0 2.714 0 3.746v12.487c0 1.032.366 1.914 1.099 2.647c.733.733 1.615 1.099 2.647 1.099H6.66c.19 0 .333-.007.429-.02a.504.504 0 0 0 .286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555 0 0 1-.904-.091a2.026 2.026 0 0 1-.872-.39a1.651 1.651 0 0 1-.572-.8l-.13-.3a3.25 3.25 0 0 0-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956 0 0 1-.17-.156a.723.723 0 0 1-.117-.182c-.026-.061-.004-.111.065-.15c.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1 0 0 1 .631.677c.2.355.44.626.722.813c.282.186.566.28.852.28c.286 0 .533-.022.742-.065a2.59 2.59 0 0 0 .585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907 0 0 1-1.333-.234a5.314 5.314 0 0 1-1.223-.507a3.5 3.5 0 0 1-1.047-.872c-.277-.347-.505-.802-.683-1.365c-.177-.564-.266-1.215-.266-1.952c0-1.049.342-1.942 1.027-2.68c-.32-.788-.29-1.673.091-2.652c.252-.079.625-.02 1.119.175c.494.195.856.362 1.086.5c.23.14.414.257.553.352a9.233 9.233 0 0 1 2.497-.338c.859 0 1.691.113 2.498.338l.494-.312a6.997 6.997 0 0 1 1.197-.572c.46-.174.81-.221 1.054-.143c.39.98.424 1.864.103 2.653c.685.737 1.028 1.63 1.028 2.68c0 .737-.089 1.39-.267 1.957c-.177.568-.407 1.023-.689 1.366a3.65 3.65 0 0 1-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9 0 0 1-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36 0 0 0 .208.189c.096.034.18.056.254.064c.074.01.18.013.318.013h2.914c1.032 0 1.914-.366 2.647-1.099c.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/>
        </svg>
    </a>

















    <a target="_blank" class="social" title="RSS Feed" href="/2024/index.xml">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280.000000 1280.000000">
            <g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentColor">
                <path d="M2295 11929 c-284 -12 -642 -45 -707 -65 -17 -5 -18 -63 -18 -1039 0 -569 4 -1036 8 -1039 5 -3 74 6 153 19 510 86 1168 95 1789 25 1348 -153 2602 -677 3670 -1531 385 -308 820 -744 1126 -1129 842 -1060 1362 -2313 1514 -3650 70 -621 61 -1279 -25 -1789 -13 -79 -22 -148 -19 -153 3 -4 471 -8 1039 -8 l1035 0 5 23 c51 225 85 942 67 1419 -23 605 -77 1044 -198 1617 -294 1400 -927 2734 -1823 3846 -1043 1295 -2364 2259 -3909 2854 -1158 447 -2451 656 -3707 600z"/>
                <path d="M2255 7845 c-269 -25 -620 -81 -667 -106 -17 -9 -18 -55 -18 -899 0 -706 3 -890 13 -890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207 -107 2267 -823 2814 -1902 166 -327 268 -637 330 -1001 38 -227 48 -384 42 -662 -8 -348 -44 -590 -126 -831 -23 -66 -41 -126 -41 -132 0 -10 184 -13 890 -13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782 -59 703 -233 1323 -545 1945 -481 956 -1313 1788 -2270 2268 -620 310 -1239 483 -1940 542 -165 14 -669 10 -840 -5z"/>
                <path d="M2519 3815 c-391 -66 -725 -336 -868 -703 -79 -201 -96 -462 -45 -677 83 -344 338 -641 666 -774 116 -47 205 -69 330 -80 412 -39 811 153 1040 500 193 292 240 648 128 981 -135 403 -492 699 -914 757 -100 14 -241 12 -337 -4z"/>
            </g>
        </svg>
    </a>





        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 See Hiong&#39;s Blog. All rights reserved.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post" data-pagefind-body>
  <div class="info">
  <h1 class="post-title">
    <a href="https://seehiong.github.io/archives/2023/auto-fill-pdf-with-langchain-and-langflow/">Autofill PDF with LangChain and LangFlow</a>
  </h1>

  <div class="headline" data-pagefind-ignore>
    <div>
      
      
      <time datetime=" 2023-05-26T20:00:00&#43;0800" class="post-date">
        May 26, 2023
      </time>
      
      <span> - </span>
      <span class="reading-time">
        
          
        

        <span>6 mins read</span>
      </span>
    </div>

    
    <ul class="tags">
      
      <li class="tag-OpenAI">
        <a href="https://seehiong.github.io/tags/openai">OpenAI</a>
      </li>
      
      <li class="tag-LLaMA">
        <a href="https://seehiong.github.io/tags/llama">LLaMA</a>
      </li>
      
      <li class="tag-LangChain">
        <a href="https://seehiong.github.io/tags/langchain">LangChain</a>
      </li>
      
      <li class="tag-LangFlow">
        <a href="https://seehiong.github.io/tags/langflow">LangFlow</a>
      </li>
      
      <li class="tag-PDF">
        <a href="https://seehiong.github.io/tags/pdf">PDF</a>
      </li>
      
      <li class="tag-PostgreSQL">
        <a href="https://seehiong.github.io/tags/postgresql">PostgreSQL</a>
      </li>
      
      <li class="tag-AI">
        <a href="https://seehiong.github.io/tags/ai">AI</a>
      </li>
      
    </ul>
    
  </div>

  
  

  
</div>

  <p>In this blog post, we will explore the usage of <a href="https://pypi.org/project/langflow/" target="_blank">LangFlow</a>, a Python library available on PyPI, to streamline the process of capturing ideas and conducting proof-of-concepts for our intended use case. Considering the current &ldquo;trend&rdquo; of tech layoffs, there might be a time (touch wood) where there is a need to go for interviews and fill-up various interview forms that require filling out personal information. Building upon the previous blog post on running GPT4All for PostgreSQL with LangChain (referenced <a href="https://seehiong.github.io/archives/2023/running-gpt4all-for-postgresql-with-langchain/" target="_blank">here</a>), we will now leverage LangFlow and OpenAI to automate the population of a sample employment form with our personal data stored in PostgreSQL.</p>
<p>Let&rsquo;s dive into the details and explore how LangFlow and OpenAI can simplify the auto-filling of employment forms, making the process more efficient and time-saving.</p>
<hr>
<h2 id="setup">Setup</h2>
<p>To get started with auto-filling a sample employment form using LangFlow and OpenAI, follow these steps:</p>
<h3 id="step-1-install-langflow">Step 1: Install LangFlow</h3>
<p>You can install LangFlow from PyPI using pip. Open your terminal or command prompt and execute the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>pip install langflow
</span></span></code></pre></div><h3 id="step-2-run-langflow">Step 2: Run LangFlow</h3>
<p>Next, run LangFlow by executing the following command in your terminal or command prompt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>python3 -m langflow
</span></span></code></pre></div><p>This will start the LangFlow application.</p>
<p><img src="/images/autofill/langflow-auto-fill-pdf-with-openai.png" alt="langflow-auto-fill-pdf-with-openai"></p>
<h3 id="step-3-create-the-postgresql-table">Step 3: Create the PostgreSQL Table</h3>
<p>Create a simple table named &ldquo;person&rdquo; in your PostgreSQL database, where you will store all the required information for an employment application form. Use the following SQL query to create the table:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> person (
</span></span><span style="display:flex;"><span>  id SERIAL <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>  firstname VARCHAR(<span style="color:#ae81ff">50</span>),
</span></span><span style="display:flex;"><span>  lastname VARCHAR(<span style="color:#ae81ff">50</span>),
</span></span><span style="display:flex;"><span>  address VARCHAR(<span style="color:#ae81ff">100</span>),
</span></span><span style="display:flex;"><span>  email VARCHAR(<span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="step-4-download-the-sample-fillable-pdf">Step 4: Download the Sample Fillable PDF</h3>
<p>Download the sample fillable PDF form template that you want to auto-fill. You can find a sample fillable PDF form template <a href="https://plumsail.com/docs/documents/v1.x/_static/files/document-generation/demos/fill-in-pdf-form-template.pdf" target="_blank">here</a>.</p>
<p>With these setup steps completed, you are now ready to proceed with auto-filling the sample employment form using LangFlow and OpenAI.</p>
<hr>
<h2 id="langflow-prototype-and-potential-issues">LangFlow Prototype and Potential Issues</h2>
<p>During the process of prototyping my use case using LangFlow, I encountered some challenges that I believe are worth highlighting. Since there were no <a href="https://github.com/logspace-ai/langflow_examples/tree/main/examples" target="_blank">existing examples</a> available for SQLDatabaseChain in the LangFlow documentation, I had to explore different combinations and configurations to make it work. However, despite my efforts, I encountered the following error:</p>
<pre tabindex="0"><code>Error: too many values to unpack (expected 2)
</code></pre><p>This error message indicates that there might be an issue related to the number of values being unpacked in the workflow. It took some time and investigation to identify the root cause of this error.</p>
<p>To tackle the problem, I carefully examined the LangFlow <a href="https://github.com/logspace-ai/langflow" target="_blank">repository</a> and made sure that the input data provided to each step was in the correct format. I also verified the number of output values produced by each step to ensure they matched the expected number of values for the subsequent steps. However, the error persisted.</p>
<p>The LangFlow diagram shown in the provided screenshot represents the flow I created to auto-fill the PDF form. Although it didn&rsquo;t work as intended, it served as a starting point for my exploration:</p>
<p><img src="/images/autofill/langflow-auto-fill-pdf-sample.png" alt="langflow-auto-fill-pdf-sample"></p>
<p>From the next section, I will proceed with the auto-filling proof-of-concepts using llama.cpp, langchain and postgreSQL.</p>
<hr>
<h2 id="preparation">Preparation</h2>
<p>Before we proceed with auto-filling the sample employment form, we need to extract the form fields from the fillable PDF. Follow the steps below:</p>
<ol>
<li>Import the necessary libraries, PyPDF2 and json:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> PyPDF2<span style="color:#f92672">,</span> json
</span></span></code></pre></div><ol start="2">
<li>Open the fillable PDF file using the open() function, and create a PDF reader object:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>pdf_file <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;fill-in-pdf-form-template.pdf&#39;</span>, <span style="color:#e6db74">&#39;rb&#39;</span>)
</span></span><span style="display:flex;"><span>pdf_reader <span style="color:#f92672">=</span> PyPDF2<span style="color:#f92672">.</span>PdfReader(pdf_file)
</span></span></code></pre></div><ol start="3">
<li>Retrieve the form text fields from the PDF using the get_form_text_fields() method:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>form_text_fields <span style="color:#f92672">=</span> pdf_reader<span style="color:#f92672">.</span>get_form_text_fields()
</span></span></code></pre></div><ol start="4">
<li>Create a dictionary to store the form field names as keys and placeholder values as values:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>json_data <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> form_text_field <span style="color:#f92672">in</span> form_text_fields:
</span></span><span style="display:flex;"><span>    json_data[form_text_field] <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;&lt;</span><span style="color:#e6db74">{</span>form_text_field<span style="color:#f92672">.</span>lower()<span style="color:#e6db74">}</span><span style="color:#e6db74">&gt;&#34;</span>
</span></span></code></pre></div><ol start="5">
<li>Convert the dictionary to a JSON string using the json.dumps() function:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>json_string <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>dumps(json_data)
</span></span><span style="display:flex;"><span>print(json_string)
</span></span></code></pre></div><p><img src="/images/autofill/autofill-form-text-field-pdf.png" alt="autofill-form-text-field-pdf"></p>
<p>The generated JSON, using <a href="https://jsonformatter.org/json-pretty-print" target="_blank">JSON Pretty Print</a>, will look like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;City&#34;</span>: <span style="color:#e6db74">&#34;&lt;city&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;PhoneNumber&#34;</span>: <span style="color:#e6db74">&#34;&lt;phonenumber&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;PostalCode&#34;</span>: <span style="color:#e6db74">&#34;&lt;postalcode&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Address&#34;</span>: <span style="color:#e6db74">&#34;&lt;address&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Activities&#34;</span>: <span style="color:#e6db74">&#34;&lt;activities&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;FirstName&#34;</span>: <span style="color:#e6db74">&#34;&lt;firstname&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;HistorySupervisor&#34;</span>: <span style="color:#e6db74">&#34;&lt;historysupervisor&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;HistoryPhoneNumber&#34;</span>: <span style="color:#e6db74">&#34;&lt;historyphonenumber&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;HistoryPosition&#34;</span>: <span style="color:#e6db74">&#34;&lt;historyposition&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;HistoryDuties&#34;</span>: <span style="color:#e6db74">&#34;&lt;historyduties&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;HistoryLeaving&#34;</span>: <span style="color:#e6db74">&#34;&lt;historyleaving&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;HistoryCompany&#34;</span>: <span style="color:#e6db74">&#34;&lt;historycompany&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;LastName&#34;</span>: <span style="color:#e6db74">&#34;&lt;lastname&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Email&#34;</span>: <span style="color:#e6db74">&#34;&lt;email&gt;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Date&#34;</span>: <span style="color:#e6db74">&#34;&lt;date&gt;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This JSON data will be used to map the form field names to the corresponding placeholder values when auto-filling the employment form.</p>
<hr>
<h2 id="the-llama-way-retrieving-postgresql-data-with-langchain">The LLaMA Way: Retrieving PostgreSQL Data with LangChain</h2>
<p>In my previous post, I discussed on how to go about in <a href="https://seehiong.github.io/archives/2023/building-a-basic-chain-with-langchain/" target="_blank">building a basic chain with LangChain</a> to ensure the privacy of sensitive data, despite the trade-off of longer processing time. Since then, there has been a recent breaking change in the quantisation method of llama.cpp, as highlighted in a <a href="https://github.com/ggerganov/llama.cpp/pull/1508" target="_blank">recent pull request</a>. To adapt to this change, I rebuilt the latest code from the llama.cpp <a href="https://github.com/ggerganov/llama.cpp" target="_blank">repository</a> and obtained the updated model from <a href="https://huggingface.co/TheBloke/WizardLM-7B-uncensored-GGML/blob/main/WizardLM-7B-uncensored.ggmlv3.q5_0.bin" target="_blank">this source</a>.</p>
<p>To begin, let&rsquo;s set up the LLM model using LangChain:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> langchain.llms <span style="color:#f92672">import</span> LlamaCpp
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> langchain <span style="color:#f92672">import</span> PromptTemplate, LLMChain
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> langchain.callbacks.streaming_stdout <span style="color:#f92672">import</span> StreamingStdOutCallbackHandler
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>llm <span style="color:#f92672">=</span> LlamaCpp(
</span></span><span style="display:flex;"><span>    model_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/home/pi/models/WizardLM-7B-uncensored.ggmlv3.q5_0.bin&#34;</span>, n_ctx<span style="color:#f92672">=</span><span style="color:#ae81ff">2048</span>, verbose<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>It&rsquo;s important to note that the model format we are using is <strong>ggjt v3 (latest)</strong>. Here&rsquo;s an image of the running model:
<img src="/images/autofill/llama-wizardlm-7b-uncensored-ggml-model.png" alt="llama-wizardlm-7b-uncensored-ggml-model"></p>
<p>Now, let&rsquo;s move on to setting up the PostgreSQL database using LangChain:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> langchain <span style="color:#f92672">import</span> SQLDatabase, SQLDatabaseChain
</span></span><span style="display:flex;"><span>db <span style="color:#f92672">=</span> SQLDatabase<span style="color:#f92672">.</span>from_uri(<span style="color:#e6db74">&#34;postgresql://postgres:postgres@192.168.68.132:5432/postgres&#34;</span>, include_tables<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;person&#34;</span>])
</span></span><span style="display:flex;"><span>db_chain <span style="color:#f92672">=</span> SQLDatabaseChain<span style="color:#f92672">.</span>from_llm(llm, db, verbose<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>default_template <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Given an input question, first create a syntactically correct postgresql query to run, then look at the results of the query and return the answer.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Use the following format:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Question: Question here
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SQLQuery: SQL Query to run
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">SQLResult: Result of the SQLQuery
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Answer: Final answer here
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span><span style="color:#e6db74">{question}</span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Get details of each person in the person table and store the result in json format, with the key as the database column name and value as the raw value retrieved from DB&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>question <span style="color:#f92672">=</span> default_template<span style="color:#f92672">.</span>format(question<span style="color:#f92672">=</span>query)
</span></span><span style="display:flex;"><span>result <span style="color:#f92672">=</span> db_chain<span style="color:#f92672">.</span>run(query<span style="color:#f92672">=</span>query)
</span></span><span style="display:flex;"><span>print(result)
</span></span></code></pre></div><p><img src="/images/autofill/langchain-retrieve-data-from-postgres.png" alt="langchain-retrieve-data-from-postgres"></p>
<p>With this setup, LangChain intelligently retrieves data from the PostgreSQL database using the LLM model and allows you to store the result in a specified format for further processing or analysis.</p>
<hr>
<h2 id="auto-filling-pdf">Auto-filling PDF</h2>
<p>In the final step of the process, we focus on manipulating the data in Python to interpolate the result into the <em>json_string</em> (obtained in previous section) and generate the final auto-filled PDF. Let&rsquo;s go through the process:</p>
<p>First, we extract the necessary data from the result string and interpolate it into the <em>json_string</em> using string formatting:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>result_dict <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(result)
</span></span><span style="display:flex;"><span>person_data <span style="color:#f92672">=</span> result_dict[<span style="color:#e6db74">&#34;person&#34;</span>][<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interpolated_json_string <span style="color:#f92672">=</span> json_string
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> key, value <span style="color:#f92672">in</span> person_data<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>    interpolated_json_string <span style="color:#f92672">=</span> interpolated_json_string<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;&lt;</span><span style="color:#e6db74">{</span>key<span style="color:#e6db74">}</span><span style="color:#e6db74">&gt;&#34;</span>, str(value))
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>print(interpolated_json_string)
</span></span></code></pre></div><p>This is how the <em>interpolated_json_string</em> looks like:
<img src="/images/autofill/llama-langchain-interpolation-json-string.png" alt="llama-langchain-interpolation-json-string"></p>
<p>Next, we use regular expressions to replace all occurrences of &lt;XXX&gt; (where XXX represents any arbitrary value) with &ldquo;N/A&rdquo; in the interpolated_json</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;&lt;[^&gt;]+&gt;&#34;</span>
</span></span><span style="display:flex;"><span>interpolated_string <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>sub(pattern, <span style="color:#e6db74">&#34;N/A&#34;</span>, interpolated_json_string)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(interpolated_string)
</span></span></code></pre></div><p>Finally, we rewrite the PDF by updating the form field values with the interpolated data:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>page <span style="color:#f92672">=</span> pdf_reader<span style="color:#f92672">.</span>pages[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pdf_writer <span style="color:#f92672">=</span> PyPDF2<span style="color:#f92672">.</span>PdfWriter(<span style="color:#e6db74">&#39;fill-in-pdf-form-template.pdf&#39;</span>)
</span></span><span style="display:flex;"><span>pdf_writer<span style="color:#f92672">.</span>add_page(page)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>interpolated_dict <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(interpolated_string)
</span></span><span style="display:flex;"><span>pdf_writer<span style="color:#f92672">.</span>update_page_form_field_values(pdf_writer<span style="color:#f92672">.</span>pages[<span style="color:#ae81ff">0</span>], interpolated_dict)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#34;auto-fill-pdf-form-template.pdf&#34;</span>, <span style="color:#e6db74">&#34;wb&#34;</span>) <span style="color:#66d9ef">as</span> output_stream:
</span></span><span style="display:flex;"><span>    pdf_writer<span style="color:#f92672">.</span>write(output_stream)
</span></span></code></pre></div><p>Here&rsquo;s how the <em>pdf_writer.write</em> output and the final auto-fill PDF:</p>
<p><img src="/images/autofill/llama-langchain-pdf-writer.png" alt="llama-langchain-pdf-writer"></p>
<p><img src="/images/autofill/llama-langchain-autofill-pdf-with-postgres.png" alt="llama-langchain-autofill-pdf-with-postgres"></p>
<p>Following these steps, you can successfully auto-fill the PDF form with the data retrieved from the database query.</p>

  
  <hr>
<div class="footer">
    
	    
            <a class="previous-post" href="https://seehiong.github.io/archives/2023/running-gpt4all-for-postgresql-with-langchain/?ref=footer"><span style="font-weight:bold;">« Previous</span><br>Running GPT4All for your PostgreSQL with LangChain</a>
        
	    
            <div class="next-post">
                <a href="https://seehiong.github.io/archives/2023/receipt-ocr-with-langchain-and-openai/?ref=footer"><span style="font-weight:bold;">Next »</span><br>Receipt OCR with LangChain, OpenAI and PyTesseract</a>
            </div>
        
    
</div>

  
  <br>
<div class="comments">
    <script>
        const getStoredTheme = () => {
            const themeFromLS = localStorage.getItem("theme");
            const themeFromHugo = document.body.classList.contains("dark-theme") ? "dark" : "light";
            const currentTheme = themeFromLS ? themeFromLS : themeFromHugo;
            return currentTheme;
        };

        const setGiscusTheme = (theme) => {
            const sendMessage = (message) => {
                const iframe = document.querySelector('iframe.giscus-frame');
                if (iframe) {
                    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                }
            };
            sendMessage({ setConfig: { theme } });
        };

        document.addEventListener("DOMContentLoaded", () => {
            setGiscusTheme(getStoredTheme());

            const giscusAttributes = {
                "src": "https://giscus.app/client.js",
                "data-repo": "seehiong/seehiong.github.io",
                "data-repo-id": "R_kgDOJg7Puw",
                "data-category": "General",
                "data-category-id": "DIC_kwDOJg7Pu84Cbyhc",
                "data-mapping": "url",
                "data-strict": "0",
                "data-reactions-enabled": "1",
                "data-emit-metadata": "0",
                "data-input-position": "top",
                "data-theme": getStoredTheme(),
                "data-lang": "en",
                "data-loading": "lazy",
                "crossorigin": "anonymous",
                "async": "",
            };

            
            const giscusScript = document.createElement("script");
            Object.entries(giscusAttributes).forEach(
                ([key, value]) => giscusScript.setAttribute(key, value));
            document.querySelector(".comments").appendChild(giscusScript);

            
            const themeSwitcher = document.querySelector(".btn-light-dark");
            if (themeSwitcher) {
                themeSwitcher.addEventListener("click", () => {
                    const currentTheme = getStoredTheme();
                    document.documentElement.classList.toggle("dark", currentTheme);
                    setGiscusTheme(currentTheme);
                });
            }
        });
    </script>
</div>
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#setup">Setup</a>
      <ul>
        <li><a href="#step-1-install-langflow">Step 1: Install LangFlow</a></li>
        <li><a href="#step-2-run-langflow">Step 2: Run LangFlow</a></li>
        <li><a href="#step-3-create-the-postgresql-table">Step 3: Create the PostgreSQL Table</a></li>
        <li><a href="#step-4-download-the-sample-fillable-pdf">Step 4: Download the Sample Fillable PDF</a></li>
      </ul>
    </li>
    <li><a href="#langflow-prototype-and-potential-issues">LangFlow Prototype and Potential Issues</a></li>
    <li><a href="#preparation">Preparation</a></li>
    <li><a href="#the-llama-way-retrieving-postgresql-data-with-langchain">The LLaMA Way: Retrieving PostgreSQL Data with LangChain</a></li>
    <li><a href="#auto-filling-pdf">Auto-filling PDF</a></li>
  </ul>
</nav>

      
    </div>
</div>
  

        </div>
    </body>
</html>


<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)']]                  
    }
  };
</script>
